<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A Data Wrangling in R | The SDOH &amp; Place Community Toolkit</title>
  <meta name="description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="A Data Wrangling in R | The SDOH &amp; Place Community Toolkit" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  <meta name="github-repo" content="healthyregions/sdhoplace-toolkit" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Data Wrangling in R | The SDOH &amp; Place Community Toolkit" />
  
  <meta name="twitter:description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link rel="prev" href="08-references.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
<script defer data-domain="toolkit.sdohplace.org" src="https://plausible.io/js/script.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="https://sdohplace.org/"><img src="images/logo.png" width = '150px'></a></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author-team"><i class="fa fa-check"></i>Author Team</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-intro.html"><a href="01-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-intro.html"><a href="01-intro.html#sdoh-place"><i class="fa fa-check"></i><b>1.1</b> SDOH &amp; Place</a></li>
<li class="chapter" data-level="1.2" data-path="01-intro.html"><a href="01-intro.html#centering-equity"><i class="fa fa-check"></i><b>1.2</b> Centering Equity</a>
<ul>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#equity-orientation"><i class="fa fa-check"></i>Equity Orientation</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#embracing-a-trauma-informed-mindset-in-decision-making"><i class="fa fa-check"></i>Embracing a Trauma-Informed Mindset in Decision-Making</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="01-intro.html"><a href="01-intro.html#dynamic-spatial-visualizations"><i class="fa fa-check"></i><b>1.3</b> Dynamic Spatial Visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="01-intro.html"><a href="01-intro.html#types-of-spatial-applications"><i class="fa fa-check"></i><b>1.4</b> Types of (Spatial) Applications</a>
<ul>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#asset-maps"><i class="fa fa-check"></i>Asset Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#simple-thematic-maps"><i class="fa fa-check"></i>Simple Thematic Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#story-maps"><i class="fa fa-check"></i>Story Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#multivariate-data-dashboards"><i class="fa fa-check"></i>Multivariate Data Dashboards</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-scoping.html"><a href="02-scoping.html"><i class="fa fa-check"></i><b>2</b> Project Planning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-scoping.html"><a href="02-scoping.html#whats-the-point"><i class="fa fa-check"></i><b>2.1</b> What’s the Point?</a></li>
<li class="chapter" data-level="2.2" data-path="02-scoping.html"><a href="02-scoping.html#refining-goals-for-sdoh"><i class="fa fa-check"></i><b>2.2</b> Refining Goals for SDOH</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#integrate-equity-directly"><i class="fa fa-check"></i>Integrate Equity Directly</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-scoping.html"><a href="02-scoping.html#defining-stakeholders"><i class="fa fa-check"></i><b>2.3</b> Defining Stakeholders</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-your-team"><i class="fa fa-check"></i>Assess Your Team</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#motivations"><i class="fa fa-check"></i>Motivations</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#finding-a-community-of-practice"><i class="fa fa-check"></i>Finding a Community of Practice</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-scoping.html"><a href="02-scoping.html#project-assessment"><i class="fa fa-check"></i><b>2.4</b> Project Assessment</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-your-strengths"><i class="fa fa-check"></i>Assess Your Strengths</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-project-needs"><i class="fa fa-check"></i>Assess Project Needs</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#is-there-an-app-for-that"><i class="fa fa-check"></i>Is there an app for that?</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-scoping.html"><a href="02-scoping.html#finalize-approach"><i class="fa fa-check"></i><b>2.5</b> Finalize Approach</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#define-smart-goals"><i class="fa fa-check"></i>Define SMART Goals</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#define-requirements"><i class="fa fa-check"></i>Define Requirements</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#break-down-details"><i class="fa fa-check"></i>Break Down Details</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#enable-agile-processes"><i class="fa fa-check"></i>Enable Agile Processes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-design.html"><a href="03-design.html"><i class="fa fa-check"></i><b>3</b> Human Centered Design</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-design.html"><a href="03-design.html#design-methods"><i class="fa fa-check"></i><b>3.1</b> Design Methods</a></li>
<li class="chapter" data-level="3.2" data-path="03-design.html"><a href="03-design.html#human-centered-design-1"><i class="fa fa-check"></i><b>3.2</b> Human-Centered Design</a>
<ul>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#identifying-user-needs"><i class="fa fa-check"></i>Identifying User Needs</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#designing-to-user-needs"><i class="fa fa-check"></i>Designing to User Needs</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#evaluation-and-iteration"><i class="fa fa-check"></i>Evaluation and Iteration</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-design.html"><a href="03-design.html#good-design"><i class="fa fa-check"></i><b>3.3</b> Good Design</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-data.html"><a href="04-data.html"><i class="fa fa-check"></i><b>4</b> Spatial Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-data.html"><a href="04-data.html#environment-setup"><i class="fa fa-check"></i><b>4.1</b> Environment Setup</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#installing-working-with-software"><i class="fa fa-check"></i>Installing &amp; Working with Software</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-data.html"><a href="04-data.html#intro-to-spatial-data"><i class="fa fa-check"></i><b>4.2</b> Intro to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#spatial-data-types"><i class="fa fa-check"></i>Spatial Data Types</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#more-types-of-data"><i class="fa fa-check"></i>More Types of Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#spatial-data-formats"><i class="fa fa-check"></i>Spatial Data Formats</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-data.html"><a href="04-data.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>4.3</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="4.4" data-path="04-data.html"><a href="04-data.html#converting-to-spatial-data"><i class="fa fa-check"></i><b>4.4</b> Converting to Spatial Data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="04-data.html"><a href="04-data.html#convert-csvs-to-spatial-data"><i class="fa fa-check"></i><b>4.4.1</b> Convert CSVs to Spatial Data</a></li>
<li class="chapter" data-level="4.4.2" data-path="04-data.html"><a href="04-data.html#geocode-addresses"><i class="fa fa-check"></i><b>4.4.2</b> Geocode Addresses</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="04-data.html"><a href="04-data.html#merge-data-sets"><i class="fa fa-check"></i><b>4.5</b> Merge data sets</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#reshape-data"><i class="fa fa-check"></i>Reshape Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#join-by-attribute"><i class="fa fa-check"></i>Join by Attribute</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#join-by-location"><i class="fa fa-check"></i>Join by Location</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="04-data.html"><a href="04-data.html#inspect-data"><i class="fa fa-check"></i><b>4.6</b> Inspect Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#thematic-maps"><i class="fa fa-check"></i>Thematic Maps</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#map-overlay"><i class="fa fa-check"></i>Map Overlay</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="04-data.html"><a href="04-data.html#finding-data"><i class="fa fa-check"></i><b>4.7</b> Finding Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#resources-3"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-1"><i class="fa fa-check"></i>Module 1</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-2"><i class="fa fa-check"></i>Module 2</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-3"><i class="fa fa-check"></i>Module 3</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="04-dataR.html"><a href="04-dataR.html"><i class="fa fa-check"></i><b>A</b> Data Wrangling in R</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#tutorials-for-r"><i class="fa fa-check"></i>Tutorials for R</a></li>
<li class="chapter" data-level="A.1" data-path="04-dataR.html"><a href="04-dataR.html#environmental-setup"><i class="fa fa-check"></i><b>A.1</b> Environmental Setup</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#setting-up-the-working-directory"><i class="fa fa-check"></i>Setting Up the Working Directory</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#installing-working-with-r-libraries"><i class="fa fa-check"></i>Installing &amp; Working with R Libraries</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="04-dataR.html"><a href="04-dataR.html#intro-to-spatial-data-1"><i class="fa fa-check"></i><b>A.2</b> Intro to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#load-spatial-data"><i class="fa fa-check"></i>Load Spatial Data</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="04-dataR.html"><a href="04-dataR.html#coordinate-reference-systems-1"><i class="fa fa-check"></i><b>A.3</b> Coordinate Reference Systems</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#refine-basic-map"><i class="fa fa-check"></i>Refine Basic Map</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="04-dataR.html"><a href="04-dataR.html#converting-to-spatial-data-1"><i class="fa fa-check"></i><b>A.4</b> Converting to Spatial Data</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="04-dataR.html"><a href="04-dataR.html#convert-csvs-to-spatial-data-1"><i class="fa fa-check"></i><b>A.4.1</b> Convert CSVs to Spatial Data</a></li>
<li class="chapter" data-level="A.4.2" data-path="04-dataR.html"><a href="04-dataR.html#geocode-addresses-1"><i class="fa fa-check"></i><b>A.4.2</b> Geocode Addresses</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="04-dataR.html"><a href="04-dataR.html#convert-to-spatial-data"><i class="fa fa-check"></i><b>A.5</b> Convert to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#basic-map-of-points"><i class="fa fa-check"></i>Basic Map of Points</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="04-dataR.html"><a href="04-dataR.html#merge-data-sets-1"><i class="fa fa-check"></i><b>A.6</b> Merge Data sets</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#reshape-data-1"><i class="fa fa-check"></i>Reshape Data</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#join-by-attribute-1"><i class="fa fa-check"></i>Join by Attribute</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#join-by-location-1"><i class="fa fa-check"></i>Join by Location</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="04-dataR.html"><a href="04-dataR.html#inspect-data-1"><i class="fa fa-check"></i><b>A.7</b> Inspect Data</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="04-dataR.html"><a href="04-dataR.html#thematic-maps-1"><i class="fa fa-check"></i><b>A.7.1</b> Thematic Maps</a></li>
<li class="chapter" data-level="A.7.2" data-path="04-dataR.html"><a href="04-dataR.html#map-overlay-1"><i class="fa fa-check"></i><b>A.7.2</b> Map Overlay</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#resources-4"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The SDOH &amp; Place Community Toolkit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="data-wrangling-in-r" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">A</span> Data Wrangling in R<a href="04-dataR.html#data-wrangling-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this part of our toolkit, we’re going to learn how to do the same things we did with Chapter 4 - Spatial Data Wrangling, but this time, we’ll use R code to handle our spatial data.</p>
<div id="getting-started" class="section level3 unnumbered hasAnchor">
<h3>Getting Started<a href="04-dataR.html#getting-started" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R is a great choice for starting in data science because it’s built for it. It’s not just a programming language, it is a whole system with tools and libraries made to help you think and work like a data scientist easily.</p>
<p>We assume a basic knowledge of R and coding languages for these toolkits. For most of the tutorials in this toolkit, you’ll need to have R and RStudio downloaded and installed on your system. You should be able to install packages, know how to find the address to a folder on your computer system, and have very basic familiarity with R.</p>
</div>
<div id="tutorials-for-r" class="section level3 unnumbered hasAnchor">
<h3>Tutorials for R<a href="04-dataR.html#tutorials-for-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are new to R, we recommend the following <a href="https://learn.datacamp.com/courses/free-introduction-to-r">intro-level tutorials</a> provided through <a href="https://rspatial.org/intr/1-introduction.html">installation guides</a>. You can also refer to this <a href="https://datacarpentry.org/r-socialsci/">R for Social Scientists</a> tutorial developed by Data Carpentry for a refresher.</p>
<p>You can also visit the <a href="https://education.rstudio.com/learn/">RStudio Education</a> page to select a learning path tailored to your experience level (<a href="https://education.rstudio.com/learn/beginner/">Beginners</a>, <a href="https://education.rstudio.com/learn/intermediate/">Intermediates</a>, <a href="https://education.rstudio.com/learn/expert/">Experts</a>). They offer detailed instructions to learners at different stages of their R journey.</p>
</div>
<div id="environmental-setup" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">A.1</span> Environmental Setup<a href="04-dataR.html#environmental-setup" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Getting started with data analysis in R involves a few preliminary steps, including downloading datasets and setting up a working directory. This introduction will guide you through these essential steps to ensure a smooth start to your data analysis journey in R.</p>
<div class="tools">
<p><strong>Download the Activity Datasets</strong></p>
<p>Please download and unzip this file to get started: <a href="https://github.com/healthyregions/sdohplace-toolkit/raw/main/data/SDOHPlace-DataWrangling.zip">SDOHPlace-DataWrangling.zip</a></p>
</div>
<div id="setting-up-the-working-directory" class="section level3 unnumbered hasAnchor">
<h3>Setting Up the Working Directory<a href="04-dataR.html#setting-up-the-working-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Setting up a working directory in R is crucial as it defines the location on your computer where your files and scripts will be saved and accessed. You can set the working directory to any folder on your system where you plan to store your datasets and R scripts. To set your working directory, use the <code>setwd("/path/to/your/directory")</code> and specify the path to your desired directory.</p>
</div>
<div id="installing-working-with-r-libraries" class="section level3 unnumbered hasAnchor">
<h3>Installing &amp; Working with R Libraries<a href="04-dataR.html#installing-working-with-r-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before starting operations related to spatial data, we need to complete an environmental setup. This workshop requires several packages, which can be installed from CRAN:</p>
<ul>
<li><code>sf</code>: simplifies spatial data manipulation</li>
<li><code>tmap</code>: streamlines thematic map creation</li>
<li><code>dplyr</code>: facilitates data manipulation</li>
<li><code>ggplot2</code>: enables advanced data visualization</li>
<li><code>tidygeocoder</code>: converts addresses to coordinates easily</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="04-dataR.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>, <span class="st">&quot;tmap&quot;</span>, <span class="st">&quot;tidygeocoder&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
<div class="tip">
<p><strong>Installation Tip</strong></p>
<p>For Mac users, check out <a href="https://github.com/r-spatial/sf" class="uri">https://github.com/r-spatial/sf</a> for additional tips if you run into errors when installing the <code>sf</code> package. Using homebrew to install <code>gdal</code> usually fixes any remaining issues.</p>
</div>
<p>Now, loading the required libraries for further steps:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="04-dataR.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-2"><a href="04-dataR.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="04-dataR.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
</div>
</div>
<div id="intro-to-spatial-data-1" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">A.2</span> Intro to Spatial Data<a href="04-dataR.html#intro-to-spatial-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Spatial data analysis in R provides a robust framework for understanding geographical information, enabling users to explore, visualize, and model spatial relationships directly within their data. Through the integration of specialized packages like sf for spatial data manipulation, ggplot2 and tmap for advanced mapping, and tidygeocoder for geocoding, R becomes a powerful tool for geographic data science. This ecosystem allows researchers and analysts to uncover spatial patterns, analyze geographic trends, and produce detailed maps that convey complex information intuitively.</p>
<div id="load-spatial-data" class="section level3 unnumbered hasAnchor">
<h3>Load Spatial Data<a href="04-dataR.html#load-spatial-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We need to load the spatial data (shapefile). Remember, this type of data is actually comprised of multiple files. All need to be present in order to read correctly. Let’s use <strong>chicagotracts.shp</strong> for practice, which includes the census tracts boundary in Chicago.</p>
<p>First, we need to read the shapefile data from where you save it.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="04-dataR.html#cb3-1" aria-hidden="true" tabindex="-1"></a>Chi_tracts <span class="ot">=</span> <span class="fu">st_read</span>(<span class="st">&quot;SDOHPlace-DataWrangling/chicagotracts.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `chicagotracts&#39; from data source 
##   `/Users/maryniakolak/Code/sdhoplace-toolkit/SDOHPlace-DataWrangling/chicagotracts.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 801 features and 9 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.94025 ymin: 41.64429 xmax: -87.52366 ymax: 42.02392
## Geodetic CRS:  WGS 84</code></pre>
<p>Always inspect data when loading in. Let’s look at a non-spatial view.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="04-dataR.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Chi_tracts)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 9 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.68822 ymin: 41.72902 xmax: -87.62394 ymax: 41.87455
## Geodetic CRS:  WGS 84
##   commarea commarea_n countyfp10     geoid10
## 1       44         44        031 17031842400
## 2       59         59        031 17031840300
## 3       34         34        031 17031841100
## 4       31         31        031 17031841200
## 5       32         32        031 17031839000
## 6       28         28        031 17031838200
##   name10        namelsad10 notes statefp10
## 1   8424 Census Tract 8424  &lt;NA&gt;        17
## 2   8403 Census Tract 8403  &lt;NA&gt;        17
## 3   8411 Census Tract 8411  &lt;NA&gt;        17
## 4   8412 Census Tract 8412  &lt;NA&gt;        17
## 5   8390 Census Tract 8390  &lt;NA&gt;        17
## 6   8382 Census Tract 8382  &lt;NA&gt;        17
##   tractce10                       geometry
## 1    842400 POLYGON ((-87.62405 41.7302...
## 2    840300 POLYGON ((-87.68608 41.8229...
## 3    841100 POLYGON ((-87.62935 41.8528...
## 4    841200 POLYGON ((-87.68813 41.8556...
## 5    839000 POLYGON ((-87.63312 41.8744...
## 6    838200 POLYGON ((-87.66782 41.8741...</code></pre>
<p>Check out the data structure of this file.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="04-dataR.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Chi_tracts)</span></code></pre></div>
<pre><code>## Classes &#39;sf&#39; and &#39;data.frame&#39;:   801 obs. of  10 variables:
##  $ commarea  : chr  &quot;44&quot; &quot;59&quot; &quot;34&quot; &quot;31&quot; ...
##  $ commarea_n: num  44 59 34 31 32 28 65 53 76 77 ...
##  $ countyfp10: chr  &quot;031&quot; &quot;031&quot; &quot;031&quot; &quot;031&quot; ...
##  $ geoid10   : chr  &quot;17031842400&quot; &quot;17031840300&quot; &quot;17031841100&quot; &quot;17031841200&quot; ...
##  $ name10    : chr  &quot;8424&quot; &quot;8403&quot; &quot;8411&quot; &quot;8412&quot; ...
##  $ namelsad10: chr  &quot;Census Tract 8424&quot; &quot;Census Tract 8403&quot; &quot;Census Tract 8411&quot; &quot;Census Tract 8412&quot; ...
##  $ notes     : chr  NA NA NA NA ...
##  $ statefp10 : chr  &quot;17&quot; &quot;17&quot; &quot;17&quot; &quot;17&quot; ...
##  $ tractce10 : chr  &quot;842400&quot; &quot;840300&quot; &quot;841100&quot; &quot;841200&quot; ...
##  $ geometry  :sfc_POLYGON of length 801; first list element: List of 1
##   ..$ : num [1:243, 1:2] -87.6 -87.6 -87.6 -87.6 -87.6 ...
##   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;XY&quot; &quot;POLYGON&quot; &quot;sfg&quot;
##  - attr(*, &quot;sf_column&quot;)= chr &quot;geometry&quot;
##  - attr(*, &quot;agr&quot;)= Factor w/ 3 levels &quot;constant&quot;,&quot;aggregate&quot;,..: NA NA NA NA NA NA NA NA NA
##   ..- attr(*, &quot;names&quot;)= chr [1:9] &quot;commarea&quot; &quot;commarea_n&quot; &quot;countyfp10&quot; &quot;geoid10&quot; ...</code></pre>
<p>The data is no longer a shapefile but an <code>sf</code> object, comprised of polygons. The <code>plot()</code> command in R help to quickly visualizes the geometric shapes of Chicago’s census tracts. The output includes multiple maps because the <code>sf</code> framework enables previews of each attribute in our spatial file.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="04-dataR.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Chi_tracts)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/spatial-view-1.png" width="672" /></p>
<p>Then, we can use <code>ggplot2</code> to create a base map. It plots the spatial data from Chi_tracts, applies a minimal theme for clarity, and labels the map with a title and a caption, offering a straightforward visualization of the area’s census tracts.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="04-dataR.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Chi_tracts) <span class="sc">+</span></span>
<span id="cb10-2"><a href="04-dataR.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="04-dataR.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="04-dataR.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Census Tract Map of Chicago&quot;</span>,</span>
<span id="cb10-5"><a href="04-dataR.html#cb10-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Chi_tracts&quot;</span>)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
</div>
<div id="coordinate-reference-systems-1" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">A.3</span> Coordinate Reference Systems<a href="04-dataR.html#coordinate-reference-systems-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For this exercise we will use <code>chicagotracts.shp</code> to explore how to change the projection of a spatial dataset in R. First, let’s check out the current coordinate reference system.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="04-dataR.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(Chi_tracts)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: WGS 84 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;latitude&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;longitude&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     ID[&quot;EPSG&quot;,4326]]</code></pre>
<p>We can use the <code>st_transform</code> function to transform CRS. When projecting a dataset of Illinois, the most appropriate NAD83 projection would be NAD83 UTM zone 16N. Chicago sits within the area best covered by <strong>NAD83 / Illinois East (ftUS)</strong> (EPSG:3435). After change the projection, we can plot the map.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="04-dataR.html#cb13-1" aria-hidden="true" tabindex="-1"></a>Chi_tracts<span class="fl">.3435</span> <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(Chi_tracts, <span class="st">&quot;EPSG:3435&quot;</span>)</span>
<span id="cb13-2"><a href="04-dataR.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Chi_tracts.3435 &lt;- st_transform(Chi_tracts, 3435)</span></span>
<span id="cb13-3"><a href="04-dataR.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(Chi_tracts<span class="fl">.3435</span>)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: EPSG:3435 
##   wkt:
## PROJCRS[&quot;NAD83 / Illinois East (ftUS)&quot;,
##     BASEGEOGCRS[&quot;NAD83&quot;,
##         DATUM[&quot;North American Datum 1983&quot;,
##             ELLIPSOID[&quot;GRS 1980&quot;,6378137,298.257222101,
##                 LENGTHUNIT[&quot;metre&quot;,1]]],
##         PRIMEM[&quot;Greenwich&quot;,0,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         ID[&quot;EPSG&quot;,4269]],
##     CONVERSION[&quot;SPCS83 Illinois East zone (US Survey feet)&quot;,
##         METHOD[&quot;Transverse Mercator&quot;,
##             ID[&quot;EPSG&quot;,9807]],
##         PARAMETER[&quot;Latitude of natural origin&quot;,36.6666666666667,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
##             ID[&quot;EPSG&quot;,8801]],
##         PARAMETER[&quot;Longitude of natural origin&quot;,-88.3333333333333,
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
##             ID[&quot;EPSG&quot;,8802]],
##         PARAMETER[&quot;Scale factor at natural origin&quot;,0.999975,
##             SCALEUNIT[&quot;unity&quot;,1],
##             ID[&quot;EPSG&quot;,8805]],
##         PARAMETER[&quot;False easting&quot;,984250,
##             LENGTHUNIT[&quot;US survey foot&quot;,0.304800609601219],
##             ID[&quot;EPSG&quot;,8806]],
##         PARAMETER[&quot;False northing&quot;,0,
##             LENGTHUNIT[&quot;US survey foot&quot;,0.304800609601219],
##             ID[&quot;EPSG&quot;,8807]]],
##     CS[Cartesian,2],
##         AXIS[&quot;easting (X)&quot;,east,
##             ORDER[1],
##             LENGTHUNIT[&quot;US survey foot&quot;,0.304800609601219]],
##         AXIS[&quot;northing (Y)&quot;,north,
##             ORDER[2],
##             LENGTHUNIT[&quot;US survey foot&quot;,0.304800609601219]],
##     USAGE[
##         SCOPE[&quot;Engineering survey, topographic mapping.&quot;],
##         AREA[&quot;United States (USA) - Illinois - counties of Boone; Champaign; Clark; Clay; Coles; Cook; Crawford; Cumberland; De Kalb; De Witt; Douglas; Du Page; Edgar; Edwards; Effingham; Fayette; Ford; Franklin; Gallatin; Grundy; Hamilton; Hardin; Iroquois; Jasper; Jefferson; Johnson; Kane; Kankakee; Kendall; La Salle; Lake; Lawrence; Livingston; Macon; Marion; Massac; McHenry; McLean; Moultrie; Piatt; Pope; Richland; Saline; Shelby; Vermilion; Wabash; Wayne; White; Will; Williamson.&quot;],
##         BBOX[37.06,-89.28,42.5,-87.02]],
##     ID[&quot;EPSG&quot;,3435]]</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="04-dataR.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(Chi_tracts<span class="fl">.3435</span>), <span class="at">border =</span> <span class="st">&quot;gray&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">&quot;NAD83 / Illinois East (ftUS)&quot;</span>, <span class="at">sub=</span><span class="st">&quot;simple plot&quot;</span>)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div id="refine-basic-map" class="section level3 unnumbered hasAnchor">
<h3>Refine Basic Map<a href="04-dataR.html#refine-basic-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we’ll switch to a more extensive cartographic mapping package, <code>tmap</code>. We approach mapping with one layer at a time. Always start with the object you want to map by calling it with the <code>tm_shape</code> function. Then, at least one descriptive/styling function follows. There are hundreds of variations and paramater specification.</p>
<p>Here we style the tracts with some semi-transparent borders.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="04-dataR.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb16-2"><a href="04-dataR.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="04-dataR.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Chi_tracts) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.5</span>) </span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>Next we fill the tracts with a light gray, and adjust the color and transparency of borders. We also add a scale bar, positioning it to the left and having a thickness of 0.8 units, and turn off the frame.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="04-dataR.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Chi_tracts) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">&quot;gray90&quot;</span>) <span class="sc">+</span> <span class="fu">tm_borders</span>(<span class="at">alpha=</span><span class="fl">0.2</span>, <span class="at">col =</span> <span class="st">&quot;gray10&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-2"><a href="04-dataR.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> (<span class="st">&quot;left&quot;</span>), <span class="at">lwd =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb17-3"><a href="04-dataR.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> F)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Check out <a href="https://rdrr.io/cran/tmap/man/tm_polygons.html" class="uri">https://rdrr.io/cran/tmap/man/tm_polygons.html</a> for more ideas.</p>
</div>
</div>
<div id="converting-to-spatial-data-1" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">A.4</span> Converting to Spatial Data<a href="04-dataR.html#converting-to-spatial-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="convert-csvs-to-spatial-data-1" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">A.4.1</span> Convert CSVs to Spatial Data<a href="04-dataR.html#convert-csvs-to-spatial-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are using the <code>Affordable_Rental_Housing_Developments.csv</code> in the dataset to show how to convert a csv Lat/Long data to points. First, we need to load the CSV data.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="04-dataR.html#cb18-1" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;SDOHPlace-DataWrangling/Affordable_Rental_Housing_Developments.csv&quot;</span>)</span></code></pre></div>
<p>Then, we need to ensure that no column (intended to be used as a coordinate) is entirely empty or filled with NA values.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="04-dataR.html#cb19-1" aria-hidden="true" tabindex="-1"></a>cleaned_housing <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(housing)</span></code></pre></div>
<p>Finally, we start to convert it to points.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="04-dataR.html#cb20-1" aria-hidden="true" tabindex="-1"></a>points_housing <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(cleaned_housing, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;Longitude&quot;</span>, <span class="st">&quot;Latitude&quot;</span>), <span class="at">crs =</span> <span class="dv">3435</span>)</span></code></pre></div>
<p>If you want, you can view the resulting sf object.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="04-dataR.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(points_housing)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 12 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -87.70753 ymin: 41.69302 xmax: -87.62286 ymax: 42.00757
## Projected CRS: NAD83 / Illinois East (ftUS)
##   Community.Area.Name Community.Area.Number
## 2         Rogers Park                     1
## 3              Uptown                     3
## 4           Edgewater                    77
## 5            Roseland                    49
## 6       Humboldt Park                    23
## 7     Grand Boulevard                    38
##        Property.Type
## 2             Senior
## 3                ARO
## 4             Senior
## 5 Supportive Housing
## 6        Multifamily
## 7        Multifamily
##                     Property.Name
## 2              Morse Senior Apts.
## 3                      The Draper
## 4                   Pomeroy Apts.
## 5               Wentworth Commons
## 6            Nelson Mandela Apts.
## 7 Legends South - Gwendolyn Place
##                   Address Zip.Code
## 2      6928 N. Wayne Ave.    60626
## 3        5050 N. Broadway    60640
## 4    5650 N. Kenmore Ave.    60660
## 5 11045 S. Wentworth Ave.    60628
## 6      607 N. Sawyer Ave.    60624
## 7   4333 S. Michigan Ave.    60653
##   Phone.Number
## 2 312-602-6207
## 3 312-818-1722
## 4 773-275-7820
## 5 773-568-7804
## 6 773-227-6332
## 7 773-624-7676
##                 Management.Company Units
## 2                 Morse Urban Dev.    44
## 3                        Flats LLC    35
## 4                  Habitat Company   198
## 5          Mercy Housing Lakefront    50
## 6                 Bickerdike Apts.     6
## 7 Interstate Realty Management Co.    71
##   X.Coordinate Y.Coordinate
## 2      1165844      1946059
## 3      1167357      1933882
## 4      1168181      1937918
## 5      1176951      1831516
## 6      1154640      1903912
## 7      1177924      1876178
##                                Location
## 2 (42.0075737709331, -87.6651711448293)
## 3 (41.9741295261027, -87.6599553011627)
## 4  (41.9851867755403, -87.656808676983)
## 5 (41.6930159120977, -87.6277673462214)
## 6 (41.8921534052465, -87.7075265659001)
## 7  (41.815550396096, -87.6228565224104)
##                     geometry
## 2 POINT (-87.66517 42.00757)
## 3 POINT (-87.65996 41.97413)
## 4 POINT (-87.65681 41.98519)
## 5 POINT (-87.62777 41.69302)
## 6 POINT (-87.70753 41.89215)
## 7 POINT (-87.62286 41.81555)</code></pre>
</div>
<div id="geocode-addresses-1" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">A.4.2</span> Geocode Addresses<a href="04-dataR.html#geocode-addresses-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here, we will use <code>chicago_methadone_nogeometry.csv</code> for practice, which includes methadone centers in Chicago (center names and addresses). First we load the <code>tidygeocoder</code> to get our geocoding done.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="04-dataR.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span></code></pre></div>
<p>Let’s read in and inspect data for methadone maintenance providers. Note, these addresses were made available by SAMSHA, and are known as publicly available information. An additional analysis could call each service to check on access to medication during COVID in Septmber 2020, and the list would be updated further.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="04-dataR.html#cb24-1" aria-hidden="true" tabindex="-1"></a>methadoneClinics <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;SDOHPlace-DataWrangling/chicago_methadone_nogeometry.csv&quot;</span>)</span>
<span id="cb24-2"><a href="04-dataR.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(methadoneClinics)</span></code></pre></div>
<pre><code>##   X
## 1 1
## 2 2
## 3 3
## 4 4
## 5 5
## 6 6
##                                                           Name
## 1                Chicago Treatment and Counseling Center, Inc.
## 2                      Sundace Methadone Treatment Center, LLC
## 3 Soft Landing Interventions/DBA Symetria Recovery of Lakeview
## 4                                        PDSSC - Chicago, Inc.
## 5                          Center for Addictive Problems, Inc.
## 6                                Family Guidance Centers, Inc.
##                   Address    City State   Zip
## 1 4453 North Broadway st. Chicago    IL 60640
## 2 4545 North Broadway St. Chicago    IL 60640
## 3    3934 N. Lincoln Ave. Chicago    IL 60613
## 4     2260 N. Elston Ave. Chicago    IL 60614
## 5        609 N. Wells St. Chicago    IL 60654
## 6     310 W. Chicago Ave. Chicago    IL 60654</code></pre>
<p>Let’s geocode one address first, just to make sure our system is working. We’ll use the “cascade” method which use the US Census and OpenStreetMap geocoders. These two services are the main options with <code>tidygeocoder</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="04-dataR.html#cb26-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">geo</span>(<span class="st">&quot;2260 N. Elston Ave. Chicago, IL&quot;</span>, <span class="at">lat =</span> latitude, <span class="at">long =</span> longitude, <span class="at">method =</span> <span class="st">&#39;cascade&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: The `method` argument of `geo()` cannot be
## &quot;cascade&quot; as of tidygeocoder 1.0.4.
## ℹ Please use `geocode_combine()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to
## see where this warning was generated.</code></pre>
<pre><code>## Passing 1 address to the US Census single address geocoder</code></pre>
<pre><code>## Query completed in: 1.5 seconds</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="04-dataR.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sample)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   address         latitude longitude geo_method
##   &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     
## 1 2260 N. Elston…     41.9     -87.7 census</code></pre>
<p>As we prepare for geocoding, check out the structure of the dataset. The data should be a character to be read properly.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="04-dataR.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(methadoneClinics)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    27 obs. of  6 variables:
##  $ X      : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Name   : chr  &quot;Chicago Treatment and Counseling Center, Inc.&quot; &quot;Sundace Methadone Treatment Center, LLC&quot; &quot;Soft Landing Interventions/DBA Symetria Recovery of Lakeview&quot; &quot;PDSSC - Chicago, Inc.&quot; ...
##  $ Address: chr  &quot;4453 North Broadway st.&quot; &quot;4545 North Broadway St.&quot; &quot;3934 N. Lincoln Ave.&quot; &quot;2260 N. Elston Ave.&quot; ...
##  $ City   : chr  &quot;Chicago&quot; &quot;Chicago&quot; &quot;Chicago&quot; &quot;Chicago&quot; ...
##  $ State  : chr  &quot;IL&quot; &quot;IL&quot; &quot;IL&quot; &quot;IL&quot; ...
##  $ Zip    : int  60640 60640 60613 60614 60654 60654 60651 60607 60607 60616 ...</code></pre>
<p>We need to clean the data a bit. We’ll add a new column for a full address, as required by the geocoding service. When you use a geocoding service, be sure to read the documentation and understand how the data needs to be formatted for input.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="04-dataR.html#cb34-1" aria-hidden="true" tabindex="-1"></a>methadoneClinics<span class="sc">$</span>fullAdd <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(methadoneClinics<span class="sc">$</span>Address), </span>
<span id="cb34-2"><a href="04-dataR.html#cb34-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">as.character</span>(methadoneClinics<span class="sc">$</span>City),</span>
<span id="cb34-3"><a href="04-dataR.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">as.character</span>(methadoneClinics<span class="sc">$</span>State), </span>
<span id="cb34-4"><a href="04-dataR.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">as.character</span>(methadoneClinics<span class="sc">$</span>Zip))</span></code></pre></div>
<p>We’re ready to go! Batch geocode with one function, and inspect:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="04-dataR.html#cb35-1" aria-hidden="true" tabindex="-1"></a>geoCodedClinics <span class="ot">&lt;-</span>  <span class="fu">geocode</span>(methadoneClinics,</span>
<span id="cb35-2"><a href="04-dataR.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="at">address =</span> <span class="st">&#39;fullAdd&#39;</span>, <span class="at">lat =</span> latitude, <span class="at">long =</span> longitude, <span class="at">method =</span> <span class="st">&#39;cascade&#39;</span>)</span></code></pre></div>
<pre><code>## Passing 27 addresses to the US Census batch geocoder</code></pre>
<pre><code>## Query completed in: 0.6 seconds</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="04-dataR.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(geoCodedClinics)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 10
##       X Name  Address City  State   Zip fullAdd
##   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;  
## 1     1 Chic… 4453 N… Chic… IL    60640 4453 N…
## 2     2 Sund… 4545 N… Chic… IL    60640 4545 N…
## 3     3 Soft… 3934 N… Chic… IL    60613 3934 N…
## 4     4 PDSS… 2260 N… Chic… IL    60614 2260 N…
## 5     5 Cent… 609 N.… Chic… IL    60654 609 N.…
## 6     6 Fami… 310 W.… Chic… IL    60654 310 W.…
## # ℹ 3 more variables: latitude &lt;dbl&gt;,
## #   longitude &lt;dbl&gt;, geo_method &lt;chr&gt;</code></pre>
<p>There were two that didn’t geocode correctly. You can inspect further. This could involve a quick check for spelling issues; or, searching the address and pulling the lat/long using Google Maps and inputting manually. Or, if we are concerned it’s a human or unknown error, we could omit. For this exercise we’ll just omit the two clinics that didn’t geocode correctly.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="04-dataR.html#cb40-1" aria-hidden="true" tabindex="-1"></a>geoCodedClinics2 <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(geoCodedClinics)</span></code></pre></div>
</div>
</div>
<div id="convert-to-spatial-data" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">A.5</span> Convert to Spatial Data<a href="04-dataR.html#convert-to-spatial-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This is not spatial data yet! To convert a static file to spatial data, we use the powerful <code>st_as_sf</code> function from <code>sf</code>. Indicate the x,y parameters (=longitude, latitude) and the coordinate reference system used. Our geocoding service used the standard <strong>EPSG:4326</strong>, so we input that here.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="04-dataR.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb41-2"><a href="04-dataR.html#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="04-dataR.html#cb41-3" aria-hidden="true" tabindex="-1"></a>methadoneSf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(geoCodedClinics2, </span>
<span id="cb41-4"><a href="04-dataR.html#cb41-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">coords =</span> <span class="fu">c</span>( <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>),</span>
<span id="cb41-5"><a href="04-dataR.html#cb41-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
<div id="basic-map-of-points" class="section level3 unnumbered hasAnchor">
<h3>Basic Map of Points<a href="04-dataR.html#basic-map-of-points" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For a really simple map of points – to ensure they were geocoded and converted to spatial data correctly, we use <code>tmap</code>. We’ll use the interactive version to view.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="04-dataR.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb42-2"><a href="04-dataR.html#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="04-dataR.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb42-4"><a href="04-dataR.html#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="04-dataR.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(methadoneSf) <span class="sc">+</span> <span class="fu">tm_dots</span>() </span></code></pre></div>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-63f58aa6f889042b5836" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-63f58aa6f889042b5836">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["Esri.WorldGrayCanvas",null,"Esri.WorldGrayCanvas",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,"Esri.WorldTopoMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addCircleMarkers","args":[[41.9637029782275,41.9647541050772,41.953257018593,41.9226387892025,41.892660322902,41.8966267510511,41.9042919004723,41.8847122200638,41.8860954476218,41.8452347265604,41.8807443172974,41.8300918331389,41.840580768766,41.8517328033068,41.8021334544579,41.8503050254604,41.8637610081343,41.790274945689,41.7781727741117,41.7589290853095,41.7739454428882,41.7510674634189,41.7486208413009,41.7258134666615,41.7482257555572,41.7499779167232,41.6869935182642],[-87.656306587417,-87.6569788897656,-87.6782189749263,-87.6740902251646,-87.6340219225045,-87.6362912616133,-87.721853750853,-87.6670389387339,-87.6670757667329,-87.6253919086599,-87.7289484676427,-87.6656361663688,-87.6951940018051,-87.7032251287844,-87.6178752910178,-87.7271597633447,-87.7349713898392,-87.6692669822064,-87.6326457680751,-87.5767414149751,-87.644712903284,-87.6211582389205,-87.6537651424451,-87.6012038323491,-87.663461052367,-87.6872437856396,-87.6227333709134],[2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619,2.82842712474619],["X1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","X22","X23","X24","X25","X26","X27"],"methadoneSf",{"interactive":true,"className":"","pane":"tmap401","stroke":true,"color":"#666666","weight":1,"opacity":0.5,"fill":true,"fillColor":["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"fillOpacity":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},null,null,["<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>1<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>1<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Chicago Treatment and Counseling Center, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>4453 North Broadway st.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,640<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>4453 North Broadway st. Chicago IL 60640<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>2<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>2<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Sundace Methadone Treatment Center, LLC<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>4545 North Broadway St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,640<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>4545 North Broadway St. Chicago IL 60640<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>3<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>3<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Soft Landing Interventions/DBA Symetria Recovery of Lakeview<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>3934 N. Lincoln Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,613<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>3934 N. Lincoln Ave. Chicago IL 60613<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>4<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>4<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>PDSSC - Chicago, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>2260 N. Elston Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,614<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>2260 N. Elston Ave. Chicago IL 60614<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>5<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>5<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Center for Addictive Problems, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>609 N. Wells St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,654<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>609 N. Wells St. Chicago IL 60654<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>6<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>6<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Family Guidance Centers, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>310 W. Chicago Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,654<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>310 W. Chicago Ave. Chicago IL 60654<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>7<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>7<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>A Rincon Family Services<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>3809 W. Grand Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,651<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>3809 W. Grand Ave. Chicago IL 60651<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>8<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>8<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>*<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>140 N. Ashland Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,607<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>140 N. Ashland Ave. Chicago IL 60607<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>9<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>9<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Healthcare Alternative Systems, Inc./NEXA <\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>210 N. Ashland Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,607<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>210 N. Ashland Ave. Chicago IL 60607<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>10<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>10<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Specialized Assistance Services, NFP<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>2630 S. Wabash Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,616<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>2630 S. Wabash Ave. Chicago IL 60616<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>11<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>11<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Garfield Counseling Center Full Service Program<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>4132 W. Madison St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,624<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>4132 W. Madison St. Chicago IL 60624<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>12<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>12<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Chicago Treatment and Counseling Center, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>3520 S. Ashland Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,609<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>3520 S. Ashland Ave. Chicago IL 60609<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>13<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>13<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Cermack Health Services of Cook County<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>2800 S. California Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,608<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>2800 S. California Ave. Chicago IL 60608<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>14<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>14<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Pilsen Wellness Center, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>3113 W. Cermak Rd.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>3113 W. Cermak Rd. Chicago IL 60623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>15<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>15<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>HRDI- Grand Boulevard Professional Counseling Center<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>340 E. 51st St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,615<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>340 E. 51st St. Chicago IL 60615<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>16<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>16<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Katherine Boone Robinson Foundation<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>4100 W. Ogden Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>4100 W. Ogden Ave. Chicago IL 60623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>17<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>17<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>New Age Services Corporation<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>1330 S. Kostner Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>1330 S. Kostner Ave. Chicago IL 60623<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>18<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>18<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Cornell Interventions Southwood-Adult<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>5701 S. Wood St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,636<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>5701 S. Wood St. Chicago IL 60636<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>19<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>19<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Family Guidance Centers, Inc. at St. Bernard Hospital<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>326 W. 64th st.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,621<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>326 W. 64th st. Chicago IL 60621<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>20<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>20<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Ijegba Community, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>1950 E 75th St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,649<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>1950 E 75th St. Chicago IL 60649<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>21<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>21<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Eva Mae Recovery Hope, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>6614 S Halsted St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,621<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>6614 S Halsted St. Chicago IL 60621<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>22<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>22<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>Nuway Community Services, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>110 E. 79th St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,619<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>110 E. 79th St. Chicago IL 60619<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>23<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>23<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>H.R.D.I- Professional Counseling Services<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>8000 S. Racine Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,620<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>8000 S. Racine Ave. Chicago IL 60620<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>24<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>24<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>*<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>936 E. 93rd St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,619<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>936 E. 93rd St. Chicago IL 60619<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>25<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>25<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>FOLA Community Action Services, Inc.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>8014 S. Ashland Ave.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,620<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>8014 S. Ashland Ave. Chicago IL 60620<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>26<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>26<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>New Hope Community Service Center<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>2559 W. 79th St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,652<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>2559 W. 79th St. Chicago IL 60652<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>27<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>X<\/nobr><\/td><td align=\"right\"><nobr>27<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Name<\/nobr><\/td><td align=\"right\"><nobr>H.R.D.I. West Pullman Professional Counseling Services<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Address<\/nobr><\/td><td align=\"right\"><nobr>33 E 114th St.<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>City<\/nobr><\/td><td align=\"right\"><nobr>Chicago<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>State<\/nobr><\/td><td align=\"right\"><nobr>IL<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>Zip<\/nobr><\/td><td align=\"right\"><nobr>60,628<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>fullAdd<\/nobr><\/td><td align=\"right\"><nobr>33 E 114th St. Chicago IL 60628<\/nobr><\/td><\/tr><tr><td style=\"color: #888888;\"><nobr>geo_method<\/nobr><\/td><td align=\"right\"><nobr>census<\/nobr><\/td><\/tr><\/table><\/div>"],null,["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Esri.WorldGrayCanvas","OpenStreetMap","Esri.WorldTopoMap"],"methadoneSf",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[41.6869935182642,41.9647541050772],"lng":[-87.7349713898392,-87.5767414149751]},"fitBounds":[41.6869935182642,-87.7349713898392,41.9647541050772,-87.5767414149751,[]]},"evals":[],"jsHooks":[]}</script>
<p>If your points didn’t plot correctly:</p>
<ul>
<li>Did you flip the longitude/latitude values?</li>
<li>Did you input the correct CRS?</li>
</ul>
<p>Those two issues are the most common errors.</p>
</div>
</div>
<div id="merge-data-sets-1" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">A.6</span> Merge Data sets<a href="04-dataR.html#merge-data-sets-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="reshape-data-1" class="section level3 unnumbered hasAnchor">
<h3>Reshape Data<a href="04-dataR.html#reshape-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here, we are trying to use the <code>COVID-19_Cases__Tests__and_Deaths_by_ZIP_Code.csv</code> dataset to practice how to convert long data to a wide data format.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="04-dataR.html#cb43-1" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;SDOHPlace-DataWrangling/COVID-19_Cases__Tests__and_Deaths_by_ZIP_Code.csv&quot;</span>)</span>
<span id="cb43-2"><a href="04-dataR.html#cb43-2" aria-hidden="true" tabindex="-1"></a>covid_clean <span class="ot">=</span> covid[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">6</span>)]</span>
<span id="cb43-3"><a href="04-dataR.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid_clean, <span class="dv">3</span>) </span></code></pre></div>
<pre><code>##   ZIP.Code Week.Number Cases...Cumulative
## 1    60603          39                 13
## 2    60604          39                 31
## 3    60611          16                 72</code></pre>
<p>Now, we are trying to create a wide data set with the cumulative cases for each week for each zip code. Enter the code and you will see the new wide data format.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="04-dataR.html#cb45-1" aria-hidden="true" tabindex="-1"></a>covid_wide <span class="ot">&lt;-</span> <span class="fu">reshape</span>(covid_clean, <span class="at">direction =</span> <span class="st">&quot;wide&quot;</span>,</span>
<span id="cb45-2"><a href="04-dataR.html#cb45-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">idvar =</span> <span class="st">&quot;ZIP.Code&quot;</span>, <span class="at">timevar =</span> <span class="st">&quot;Week.Number&quot;</span>) </span>
<span id="cb45-3"><a href="04-dataR.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid_wide, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   ZIP.Code Cases...Cumulative.39
## 1    60603                    13
## 2    60604                    31
## 3    60611                   458
##   Cases...Cumulative.16 Cases...Cumulative.15
## 1                    NA                    NA
## 2                    NA                    NA
## 3                    72                    64
##   Cases...Cumulative.11 Cases...Cumulative.10
## 1                    NA                    NA
## 2                    NA                    NA
## 3                    NA                    NA
##   Cases...Cumulative.12 Cases...Cumulative.13
## 1                    NA                    NA
## 2                    NA                    NA
## 3                    16                    41
##   Cases...Cumulative.14 Cases...Cumulative.34
## 1                    NA                    11
## 2                    NA                    29
## 3                    57                   352
##   Cases...Cumulative.17 Cases...Cumulative.18
## 1                    NA                    NA
## 2                     6                    11
## 3                    80                    92
##   Cases...Cumulative.19 Cases...Cumulative.20
## 1                    NA                     5
## 2                    14                    17
## 3                    99                   114
##   Cases...Cumulative.31 Cases...Cumulative.22
## 1                     9                     6
## 2                    25                    22
## 3                   286                   139
##   Cases...Cumulative.23 Cases...Cumulative.24
## 1                     6                     6
## 2                    23                    24
## 3                   148                   152
##   Cases...Cumulative.25 Cases...Cumulative.28
## 1                     6                     6
## 2                    24                    25
## 3                   163                   223
##   Cases...Cumulative.29 Cases...Cumulative.30
## 1                     8                     9
## 2                    25                    25
## 3                   240                   264
##   Cases...Cumulative.32 Cases...Cumulative.33
## 1                    10                    11
## 2                    25                    25
## 3                   305                   333
##   Cases...Cumulative.26 Cases...Cumulative.27
## 1                     6                     6
## 2                    25                    25
## 3                   175                   196
##   Cases...Cumulative.36 Cases...Cumulative.38
## 1                    11                    13
## 2                    31                    31
## 3                   391                   435
##   Cases...Cumulative.21 Cases...Cumulative.35
## 1                     6                    11
## 2                    20                    30
## 3                   124                   371
##   Cases...Cumulative.37 Cases...Cumulative.40
## 1                    13                    14
## 2                    31                    31
## 3                   411                   478</code></pre>
</div>
<div id="join-by-attribute-1" class="section level3 unnumbered hasAnchor">
<h3>Join by Attribute<a href="04-dataR.html#join-by-attribute-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here, we’ll merge data sets with a common variable in R. Merging the cumulative case data set you created in the last section to zip code spatial data (<code>ChiZipMaster1.geojson</code>) will allow you to map the case data. You’ll be merging the case data and spatial data using the zip codes field of each dataset.</p>
<p>We’ve cleaned our covid case data already, but not all values under the zipcode column are valid. There is a row has a value of “unkown”, so let’s remove that.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="04-dataR.html#cb47-1" aria-hidden="true" tabindex="-1"></a>covid_wide_clean <span class="ot">&lt;-</span> covid_wide <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="04-dataR.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ZIP.Code <span class="sc">!=</span> <span class="st">&quot;unknown&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(ZIP.Code))</span></code></pre></div>
<p>Then, we need to load the zipcode data.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="04-dataR.html#cb48-1" aria-hidden="true" tabindex="-1"></a>zipcode <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;SDOHPlace-DataWrangling/ChiZipMaster1.geojson&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `ChiZipMaster1&#39; from data source 
##   `/Users/maryniakolak/Code/sdhoplace-toolkit/SDOHPlace-DataWrangling/ChiZipMaster1.geojson&#39; 
##   using driver `GeoJSON&#39;
## Simple feature collection with 540 features and 31 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.87596 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## Geodetic CRS:  WGS 84</code></pre>
<p>You’ll notice that the zip codes are repeated in the zip code data set, and needs to be cleaned before we can continue with merging the data.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="04-dataR.html#cb50-1" aria-hidden="true" tabindex="-1"></a>zipcode_unique <span class="ot">&lt;-</span> <span class="fu">distinct</span>(zipcode)</span>
<span id="cb50-2"><a href="04-dataR.html#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="04-dataR.html#cb50-3" aria-hidden="true" tabindex="-1"></a>zipcode_unique <span class="ot">&lt;-</span> zipcode <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="04-dataR.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(zip) <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="04-dataR.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="04-dataR.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Now, the two datasets are ready to join together by the zipcode. Make sure to check they have been joined successully.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="04-dataR.html#cb51-1" aria-hidden="true" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> zipcode <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="04-dataR.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(covid_wide_clean, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;zip&quot;</span> <span class="ot">=</span> <span class="st">&quot;ZIP.Code&quot;</span>))</span></code></pre></div>
</div>
<div id="join-by-location-1" class="section level3 unnumbered hasAnchor">
<h3>Join by Location<a href="04-dataR.html#join-by-location-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll create a spatial join with <code>affordable_Rental_Housing_Developments.csv</code> and <code>ChiZipMaster1.geojson</code>.</p>
<p>In this example, we want to join tract-level data to the Rental Housing Developments, so we can identify which tract they are within.</p>
<p>First, read in the point data</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="04-dataR.html#cb52-1" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;SDOHPlace-DataWrangling/Affordable_Rental_Housing_Developments.csv&quot;</span>)</span>
<span id="cb52-2"><a href="04-dataR.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(housing)</span></code></pre></div>
<pre><code>##   Community.Area.Name Community.Area.Number
## 1           Englewood                    68
## 2         Rogers Park                     1
## 3              Uptown                     3
## 4           Edgewater                    77
## 5            Roseland                    49
## 6       Humboldt Park                    23
##        Property.Type        Property.Name
## 1           Veterans   Hope Manor Village
## 2             Senior   Morse Senior Apts.
## 3                ARO           The Draper
## 4             Senior        Pomeroy Apts.
## 5 Supportive Housing    Wentworth Commons
## 6        Multifamily Nelson Mandela Apts.
##                              Address Zip.Code
## 1 5900-6100 S. Green/Peoria/Sangamon    60621
## 2                 6928 N. Wayne Ave.    60626
## 3                   5050 N. Broadway    60640
## 4               5650 N. Kenmore Ave.    60660
## 5            11045 S. Wentworth Ave.    60628
## 6                 607 N. Sawyer Ave.    60624
##   Phone.Number             Management.Company
## 1 312-564-2393 Volunteers of America Illinois
## 2 312-602-6207               Morse Urban Dev.
## 3 312-818-1722                      Flats LLC
## 4 773-275-7820                Habitat Company
## 5 773-568-7804        Mercy Housing Lakefront
## 6 773-227-6332               Bickerdike Apts.
##   Units X.Coordinate Y.Coordinate Latitude
## 1    36           NA           NA       NA
## 2    44      1165844      1946059 42.00757
## 3    35      1167357      1933882 41.97413
## 4   198      1168181      1937918 41.98519
## 5    50      1176951      1831516 41.69302
## 6     6      1154640      1903912 41.89215
##   Longitude
## 1        NA
## 2 -87.66517
## 3 -87.65996
## 4 -87.65681
## 5 -87.62777
## 6 -87.70753
##                                Location
## 1                                      
## 2 (42.0075737709331, -87.6651711448293)
## 3 (41.9741295261027, -87.6599553011627)
## 4  (41.9851867755403, -87.656808676983)
## 5 (41.6930159120977, -87.6277673462214)
## 6 (41.8921534052465, -87.7075265659001)</code></pre>
<p>We’ll omit null data as a pre-processing step in this example, then read in as a spatial data format.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="04-dataR.html#cb54-1" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(housing)</span>
<span id="cb54-2"><a href="04-dataR.html#cb54-2" aria-hidden="true" tabindex="-1"></a>housing <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(housing, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;Longitude&quot;</span>, <span class="st">&quot;Latitude&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
<p>Now, we spatially join, intersecting zip codes with housing developments.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="04-dataR.html#cb55-1" aria-hidden="true" tabindex="-1"></a>joined_data1 <span class="ot">&lt;-</span> <span class="fu">st_join</span>(housing, zipcode, <span class="at">join =</span> st_intersects)</span></code></pre></div>
<p>Don’t forget to inspect the data.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="04-dataR.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(joined_data1)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 43 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -87.66517 ymin: 42.00757 xmax: -87.66517 ymax: 42.00757
## Geodetic CRS:  WGS 84
##     Community.Area.Name Community.Area.Number
## 2           Rogers Park                     1
## 2.1         Rogers Park                     1
## 2.2         Rogers Park                     1
## 2.3         Rogers Park                     1
## 2.4         Rogers Park                     1
## 2.5         Rogers Park                     1
##     Property.Type      Property.Name
## 2          Senior Morse Senior Apts.
## 2.1        Senior Morse Senior Apts.
## 2.2        Senior Morse Senior Apts.
## 2.3        Senior Morse Senior Apts.
## 2.4        Senior Morse Senior Apts.
## 2.5        Senior Morse Senior Apts.
##                Address Zip.Code Phone.Number
## 2   6928 N. Wayne Ave.    60626 312-602-6207
## 2.1 6928 N. Wayne Ave.    60626 312-602-6207
## 2.2 6928 N. Wayne Ave.    60626 312-602-6207
## 2.3 6928 N. Wayne Ave.    60626 312-602-6207
## 2.4 6928 N. Wayne Ave.    60626 312-602-6207
## 2.5 6928 N. Wayne Ave.    60626 312-602-6207
##     Management.Company Units X.Coordinate
## 2     Morse Urban Dev.    44      1165844
## 2.1   Morse Urban Dev.    44      1165844
## 2.2   Morse Urban Dev.    44      1165844
## 2.3   Morse Urban Dev.    44      1165844
## 2.4   Morse Urban Dev.    44      1165844
## 2.5   Morse Urban Dev.    44      1165844
##     Y.Coordinate
## 2        1946059
## 2.1      1946059
## 2.2      1946059
## 2.3      1946059
## 2.4      1946059
## 2.5      1946059
##                                  Location
## 2   (42.0075737709331, -87.6651711448293)
## 2.1 (42.0075737709331, -87.6651711448293)
## 2.2 (42.0075737709331, -87.6651711448293)
## 2.3 (42.0075737709331, -87.6651711448293)
## 2.4 (42.0075737709331, -87.6651711448293)
## 2.5 (42.0075737709331, -87.6651711448293)
##       zip objectid shape_area shape_len
## 2   60626        1   49170579  33983.91
## 2.1 60626        1   49170579  33983.91
## 2.2 60626        1   49170579  33983.91
## 2.3 60626        1   49170579  33983.91
## 2.4 60626        1   49170579  33983.91
## 2.5 60626        1   49170579  33983.91
##     Case.Rate...Cumulative year totPopE whiteP
## 2                   2911.7 2018   49730   59.2
## 2.1                 2911.7 2018   49730   59.2
## 2.2                 2911.7 2018   49730   59.2
## 2.3                 2911.7 2018   49730   59.2
## 2.4                 2911.7 2018   49730   59.2
## 2.5                 2911.7 2018   49730   59.2
##     blackP amIndP asianP pacIsP otherP hispP
## 2    25.27    0.1   5.89   0.01   9.53 20.62
## 2.1  25.27    0.1   5.89   0.01   9.53 20.62
## 2.2  25.27    0.1   5.89   0.01   9.53 20.62
## 2.3  25.27    0.1   5.89   0.01   9.53 20.62
## 2.4  25.27    0.1   5.89   0.01   9.53 20.62
## 2.5  25.27    0.1   5.89   0.01   9.53 20.62
##     noHSP age0_4 age5_14 age15_19 age20_24
## 2   11.82   2553    4765     2937     5056
## 2.1 11.82   2553    4765     2937     5056
## 2.2 11.82   2553    4765     2937     5056
## 2.3 11.82   2553    4765     2937     5056
## 2.4 11.82   2553    4765     2937     5056
## 2.5 11.82   2553    4765     2937     5056
##     age15_44 age45_49 age50_54 age55_59
## 2      25875     3295     3051     2713
## 2.1    25875     3295     3051     2713
## 2.2    25875     3295     3051     2713
## 2.3    25875     3295     3051     2713
## 2.4    25875     3295     3051     2713
## 2.5    25875     3295     3051     2713
##     age60_64 ageOv65 ageOv18 age18_64 a15_24P
## 2       2447    5031   41428    36397   16.07
## 2.1     2447    5031   41428    36397   16.07
## 2.2     2447    5031   41428    36397   16.07
## 2.3     2447    5031   41428    36397   16.07
## 2.4     2447    5031   41428    36397   16.07
## 2.5     2447    5031   41428    36397   16.07
##     und45P ovr65P disbP
## 2    66.75  10.12  10.8
## 2.1  66.75  10.12  10.8
## 2.2  66.75  10.12  10.8
## 2.3  66.75  10.12  10.8
## 2.4  66.75  10.12  10.8
## 2.5  66.75  10.12  10.8
##                       geometry
## 2   POINT (-87.66517 42.00757)
## 2.1 POINT (-87.66517 42.00757)
## 2.2 POINT (-87.66517 42.00757)
## 2.3 POINT (-87.66517 42.00757)
## 2.4 POINT (-87.66517 42.00757)
## 2.5 POINT (-87.66517 42.00757)</code></pre>
<p>We could also flip things around, and try to count how many developments intersect each tract. We can use lengths() to find out how many items are present in a vector. Here,</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="04-dataR.html#cb58-1" aria-hidden="true" tabindex="-1"></a>zipcode<span class="sc">$</span>TotHousing <span class="ot">&lt;-</span> <span class="fu">lengths</span>(<span class="fu">st_intersects</span>(zipcode, housing))</span>
<span id="cb58-2"><a href="04-dataR.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="04-dataR.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zipcode)</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 32 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.63999 ymin: 41.85317 xmax: -87.60246 ymax: 41.88913
## Geodetic CRS:  WGS 84
##     zip objectid shape_area shape_len
## 1 60601       27    9166246  19804.58
## 2 60602       26    4847125  14448.17
## 3 60603       19    4560229  13672.68
## 4 60604       48    4294902  12245.81
## 5 60605       20   36301276  37973.35
## 6 60606       31    6766411  12040.44
##   Case.Rate...Cumulative year totPopE whiteP
## 1                 1451.4 2018   14675  74.17
## 2                 1688.1 2018    1244  68.17
## 3                 1107.3 2018    1174  63.46
## 4                 3964.2 2018     782  63.43
## 5                 1420.8 2018   27519  61.20
## 6                 2289.6 2018    3101  72.75
##   blackP amIndP asianP pacIsP otherP hispP
## 1   5.57   0.45  18.00   0.00   1.81  8.68
## 2   3.78   5.31  19.45   0.00   3.30  6.51
## 3   3.24   0.00  27.60   0.00   5.71  9.80
## 4   5.63   0.00  29.67   0.00   1.28  4.35
## 5  17.18   0.18  16.10   0.03   5.31  5.84
## 6   2.35   0.00  18.09   0.00   6.80  6.29
##   noHSP age0_4 age5_14 age15_19 age20_24
## 1  0.00    550     156      907      909
## 2  0.00     61      87       18       91
## 3  0.00     13      43      179      172
## 4  0.00     12       7       52      168
## 5  2.39    837    1279     2172     2282
## 6  0.73     57      44        0      139
##   age15_44 age45_49 age50_54 age55_59 age60_64
## 1     8726      976     1009      324      859
## 2      987       46       53        0        5
## 3      684       75       47      150       50
## 4      450       27       47       54       92
## 5    16364     1766     1520     1824     1360
## 6     1863      213      153      168      172
##   ageOv65 ageOv18 age18_64 a15_24P und45P
## 1    2075   13855    11780   12.37  64.27
## 2       5    1095     1090    8.76  91.24
## 3     112    1118     1006   29.90  63.03
## 4      93     744      651   28.13  59.97
## 5    2569   25259    22690   16.19  67.15
## 6     431    3000     2569    4.48  63.33
##   ovr65P disbP                       geometry
## 1  14.14   6.4 MULTIPOLYGON (((-87.62271 4...
## 2   0.40   0.2 MULTIPOLYGON (((-87.60997 4...
## 3   9.54   7.3 MULTIPOLYGON (((-87.61633 4...
## 4  11.89   4.1 MULTIPOLYGON (((-87.63376 4...
## 5   9.34   5.3 MULTIPOLYGON (((-87.62064 4...
## 6  13.90   1.9 MULTIPOLYGON (((-87.63397 4...
##   TotHousing
## 1          1
## 2          0
## 3          0
## 4          0
## 5          1
## 6          0</code></pre>
</div>
</div>
<div id="inspect-data-1" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">A.7</span> Inspect Data<a href="04-dataR.html#inspect-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="thematic-maps-1" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">A.7.1</span> Thematic Maps<a href="04-dataR.html#thematic-maps-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To inspect data from a spatial perspective, we can create a series of choropleth maps.</p>
<p><strong>Example 1</strong> Number of Affordable Housing Developments per Zip Code {-}</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="04-dataR.html#cb60-1" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> zipcode) <span class="sc">+</span></span>
<span id="cb60-2"><a href="04-dataR.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> TotHousing), <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb60-3"><a href="04-dataR.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb60-4"><a href="04-dataR.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of Affordable Housing Developments per Zip Code&quot;</span>,</span>
<span id="cb60-5"><a href="04-dataR.html#cb60-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;# Developments&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-6"><a href="04-dataR.html#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb60-7"><a href="04-dataR.html#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="04-dataR.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plot)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p><strong>Example 2</strong> Number of COVID-19 Cases per Zip Code {-}</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="04-dataR.html#cb61-1" aria-hidden="true" tabindex="-1"></a>Chi_Zipsf <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;SDOHPlace-DataWrangling/ChiZipMaster1.geojson&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `ChiZipMaster1&#39; from data source 
##   `/Users/maryniakolak/Code/sdhoplace-toolkit/SDOHPlace-DataWrangling/ChiZipMaster1.geojson&#39; 
##   using driver `GeoJSON&#39;
## Simple feature collection with 540 features and 31 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.87596 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="04-dataR.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb63-2"><a href="04-dataR.html#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="04-dataR.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Chi_Zipsf) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">&quot;Case.Rate...Cumulative&quot;</span>, </span>
<span id="cb63-4"><a href="04-dataR.html#cb63-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">style=</span><span class="st">&quot;jenks&quot;</span>, <span class="at">pal=</span><span class="st">&quot;BuPu&quot;</span>, <span class="at">n=</span><span class="dv">4</span>, <span class="at">title =</span> <span class="st">&quot;COVID Rt&quot;</span>) <span class="sc">+</span> </span>
<span id="cb63-5"><a href="04-dataR.html#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="04-dataR.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>, <span class="at">legend.outside.position =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
</div>
<div id="map-overlay-1" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">A.7.2</span> Map Overlay<a href="04-dataR.html#map-overlay-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Example 1</strong> Afforfable Housing Developments &amp; Zipcode Boundaries {-}</p>
<p>Let’s review the steps we load and convert the <strong>Affordable_Rental_Housing_Developments.csv</strong> to spatial points. We will first use a graduated symbology to visualize the it. Points with more units will be bigger, and not all places are weighted the same visually.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="04-dataR.html#cb64-1" aria-hidden="true" tabindex="-1"></a>Chi_Zipsf <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;SDOHPlace-DataWrangling/ChiZipMaster1.geojson&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `ChiZipMaster1&#39; from data source 
##   `/Users/maryniakolak/Code/sdhoplace-toolkit/SDOHPlace-DataWrangling/ChiZipMaster1.geojson&#39; 
##   using driver `GeoJSON&#39;
## Simple feature collection with 540 features and 31 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.87596 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="04-dataR.html#cb66-1" aria-hidden="true" tabindex="-1"></a>AffHousing <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;SDOHPlace-DataWrangling/Affordable_Rental_Housing_Developments.csv&quot;</span>)</span>
<span id="cb66-2"><a href="04-dataR.html#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="04-dataR.html#cb66-3" aria-hidden="true" tabindex="-1"></a>AffHousing <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(AffHousing)</span>
<span id="cb66-4"><a href="04-dataR.html#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="04-dataR.html#cb66-5" aria-hidden="true" tabindex="-1"></a>AffHousingSf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(AffHousing, </span>
<span id="cb66-6"><a href="04-dataR.html#cb66-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;Longitude&quot;</span>, <span class="st">&quot;Latitude&quot;</span>),</span>
<span id="cb66-7"><a href="04-dataR.html#cb66-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb66-8"><a href="04-dataR.html#cb66-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-9"><a href="04-dataR.html#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(AffHousingSf) <span class="sc">+</span> <span class="fu">tm_bubbles</span>(<span class="st">&quot;Units&quot;</span>, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>, <span class="at">style =</span> <span class="st">&quot;sd&quot;</span>) </span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<p>Then, let’s overlay that layer to the zipcode boundary.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="04-dataR.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Chi_Zipsf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;gray80&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-2"><a href="04-dataR.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(AffHousingSf) <span class="sc">+</span> <span class="fu">tm_bubbles</span>(<span class="st">&quot;Units&quot;</span>, <span class="at">col =</span> <span class="st">&quot;purple&quot;</span>) </span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p><strong>Example 2</strong> COVID-19 &amp; Methadone {-}</p>
<p>In the first example, let create a map showing both COVID-19 and methadone clinic data (used in A.3). First, let’s add our zipcode map.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="04-dataR.html#cb68-1" aria-hidden="true" tabindex="-1"></a>Chi_Zipsf <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;SDOHPlace-DataWrangling/ChiZipMaster1.geojson&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `ChiZipMaster1&#39; from data source 
##   `/Users/maryniakolak/Code/sdhoplace-toolkit/SDOHPlace-DataWrangling/ChiZipMaster1.geojson&#39; 
##   using driver `GeoJSON&#39;
## Simple feature collection with 540 features and 31 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -87.87596 ymin: 41.64454 xmax: -87.52414 ymax: 42.02304
## Geodetic CRS:  WGS 84</code></pre>
<p>With this overlay, we’ll add a “hack” to include the methadone clinic points in a legend.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="04-dataR.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span></code></pre></div>
<pre><code>## tmap mode set to plotting</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="04-dataR.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 1st layer (gets plotted first)</span></span>
<span id="cb72-2"><a href="04-dataR.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Chi_Zipsf) <span class="sc">+</span> <span class="fu">tm_fill</span>(<span class="st">&quot;Case.Rate...Cumulative&quot;</span>, </span>
<span id="cb72-3"><a href="04-dataR.html#cb72-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">style=</span><span class="st">&quot;jenks&quot;</span>, <span class="at">pal=</span><span class="st">&quot;BuPu&quot;</span>, <span class="at">n=</span><span class="dv">4</span>, <span class="at">title =</span> <span class="st">&quot;COVID Rt&quot;</span>) <span class="sc">+</span> </span>
<span id="cb72-4"><a href="04-dataR.html#cb72-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb72-5"><a href="04-dataR.html#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="do">## 2nd layer (overlay)</span></span>
<span id="cb72-6"><a href="04-dataR.html#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(methadoneSf) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">size =</span> <span class="fl">0.2</span>, <span class="at">col =</span> <span class="st">&quot;gray20&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-7"><a href="04-dataR.html#cb72-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb72-8"><a href="04-dataR.html#cb72-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## &quot;Hack&quot; a manual symbology for dots in the legend</span></span>
<span id="cb72-9"><a href="04-dataR.html#cb72-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_add_legend</span>(<span class="st">&quot;symbol&quot;</span>, <span class="at">col =</span> <span class="st">&quot;gray20&quot;</span>, <span class="at">size =</span> .<span class="dv">2</span>, <span class="at">labels =</span> <span class="st">&quot;Methadone MOUD&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-10"><a href="04-dataR.html#cb72-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb72-11"><a href="04-dataR.html#cb72-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Cartographic Styling</span></span>
<span id="cb72-12"><a href="04-dataR.html#cb72-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>, <span class="at">legend.outside.position =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<p><img src="SDOH---Place-Toolkit_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
</div>
</div>
<div id="resources-4" class="section level2 unnumbered hasAnchor">
<h2>Resources<a href="04-dataR.html#resources-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>We highlight recommend Chapters 3-5 as mandatory reading in this classic, <a href="https://r.geocompx.org/">Geocomputation with R</a>. Perfecting selections and filters in the <em>Attribute Data Operations</em> chapter will help you become a data wrangling master. Perfect distance metrics and essential GIS operations in subsequent chapters.</p></li>
<li><p>The Appendix in <a href="https://mgimond.github.io/Spatial/introGIS.html">Gimond’s Intro to GIS</a> online book has a super overview of R examples, not to be missed.</p></li>
<li><p>Another superb resource is <a href="https://walker-data.com/census-r/index.html">Analyzing US Census Data</a> by Kyle Walker, with some of our favorite examples of extracing &amp; reshaping data directly from the Census using code. Highly recommended!</p></li>
</ul>

</div>
</div>
<hr class="footer-line">
            </section>

          </div>
        </div>
      </div>
<a href="08-references.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"float": true
}
});
});
</script>

</body>

</html>
