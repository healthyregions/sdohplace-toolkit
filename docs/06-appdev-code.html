<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>C Coding for app development | The SDOH &amp; Place Community Toolkit</title>
  <meta name="description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="C Coding for app development | The SDOH &amp; Place Community Toolkit" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  <meta name="github-repo" content="healthyregions/sdhoplace-toolkit" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="C Coding for app development | The SDOH &amp; Place Community Toolkit" />
  
  <meta name="twitter:description" content="This is the beginning of the SDOH &amp; Place Toolkit." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
<link rel="prev" href="05-analysisR.html"/>
<link rel="next" href="08-references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script defer data-domain="toolkit.sdohplace.org" src="https://plausible.io/js/script.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="https://sdohplace.org/"><img src="images/logo.png" width = '150px'></a></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#table-of-contents"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#author-team"><i class="fa fa-check"></i>Author Team</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-intro.html"><a href="01-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-intro.html"><a href="01-intro.html#sdoh-place"><i class="fa fa-check"></i><b>1.1</b> SDOH &amp; Place</a></li>
<li class="chapter" data-level="1.2" data-path="01-intro.html"><a href="01-intro.html#centering-equity"><i class="fa fa-check"></i><b>1.2</b> Centering Equity</a>
<ul>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#equity-orientation"><i class="fa fa-check"></i>Equity Orientation</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#embracing-a-trauma-informed-mindset-in-decision-making"><i class="fa fa-check"></i>Embracing a Trauma-Informed Mindset in Decision-Making</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="01-intro.html"><a href="01-intro.html#dynamic-spatial-visualizations"><i class="fa fa-check"></i><b>1.3</b> Dynamic Spatial Visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="01-intro.html"><a href="01-intro.html#types-of-spatial-applications"><i class="fa fa-check"></i><b>1.4</b> Types of (Spatial) Applications</a>
<ul>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#asset-maps"><i class="fa fa-check"></i>Asset Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#simple-thematic-maps"><i class="fa fa-check"></i>Simple Thematic Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#story-maps"><i class="fa fa-check"></i>Story Maps</a></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#multivariate-data-dashboards"><i class="fa fa-check"></i>Multivariate Data Dashboards</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="01-intro.html"><a href="01-intro.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-scoping.html"><a href="02-scoping.html"><i class="fa fa-check"></i><b>2</b> Project Planning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-scoping.html"><a href="02-scoping.html#whats-the-point"><i class="fa fa-check"></i><b>2.1</b> What’s the Point?</a></li>
<li class="chapter" data-level="2.2" data-path="02-scoping.html"><a href="02-scoping.html#refining-goals-for-sdoh"><i class="fa fa-check"></i><b>2.2</b> Refining Goals for SDOH</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#integrate-equity-directly"><i class="fa fa-check"></i>Integrate Equity Directly</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02-scoping.html"><a href="02-scoping.html#defining-stakeholders"><i class="fa fa-check"></i><b>2.3</b> Defining Stakeholders</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-your-team"><i class="fa fa-check"></i>Assess Your Team</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#motivations"><i class="fa fa-check"></i>Motivations</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#finding-a-community-of-practice"><i class="fa fa-check"></i>Finding a Community of Practice</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-scoping.html"><a href="02-scoping.html#project-assessment"><i class="fa fa-check"></i><b>2.4</b> Project Assessment</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-your-strengths"><i class="fa fa-check"></i>Assess Your Strengths</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#assess-project-needs"><i class="fa fa-check"></i>Assess Project Needs</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#is-there-an-app-for-that"><i class="fa fa-check"></i>Is there an app for that?</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-scoping.html"><a href="02-scoping.html#finalize-approach"><i class="fa fa-check"></i><b>2.5</b> Finalize Approach</a>
<ul>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#define-smart-goals"><i class="fa fa-check"></i>Define SMART Goals</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#define-requirements"><i class="fa fa-check"></i>Define Requirements</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#break-down-details"><i class="fa fa-check"></i>Break Down Details</a></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#enable-agile-processes"><i class="fa fa-check"></i>Enable Agile Processes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="02-scoping.html"><a href="02-scoping.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-design.html"><a href="03-design.html"><i class="fa fa-check"></i><b>3</b> Human Centered Design</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-design.html"><a href="03-design.html#design-methods"><i class="fa fa-check"></i><b>3.1</b> Design Methods</a></li>
<li class="chapter" data-level="3.2" data-path="03-design.html"><a href="03-design.html#human-centered-design-1"><i class="fa fa-check"></i><b>3.2</b> Human-Centered Design</a>
<ul>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#identifying-user-needs"><i class="fa fa-check"></i>Identifying User Needs</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#designing-to-user-needs"><i class="fa fa-check"></i>Designing to User Needs</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#evaluation-and-iteration"><i class="fa fa-check"></i>Evaluation and Iteration</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03-design.html"><a href="03-design.html#good-design"><i class="fa fa-check"></i><b>3.3</b> Good Design</a></li>
<li class="chapter" data-level="" data-path="03-design.html"><a href="03-design.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-data.html"><a href="04-data.html"><i class="fa fa-check"></i><b>4</b> Spatial Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-data.html"><a href="04-data.html#environment-setup"><i class="fa fa-check"></i><b>4.1</b> Environment Setup</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#installing-working-with-software"><i class="fa fa-check"></i>Installing &amp; Working with Software</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-data.html"><a href="04-data.html#intro-to-spatial-data"><i class="fa fa-check"></i><b>4.2</b> Intro to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#spatial-data-types"><i class="fa fa-check"></i>Spatial Data Types</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#more-types-of-data"><i class="fa fa-check"></i>More Types of Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#spatial-data-formats"><i class="fa fa-check"></i>Spatial Data Formats</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04-data.html"><a href="04-data.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>4.3</b> Coordinate Reference Systems</a></li>
<li class="chapter" data-level="4.4" data-path="04-data.html"><a href="04-data.html#converting-to-spatial-data"><i class="fa fa-check"></i><b>4.4</b> Converting to Spatial Data</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="04-data.html"><a href="04-data.html#csv-to-spatial-data"><i class="fa fa-check"></i><b>4.4.1</b> CSV to Spatial Data</a></li>
<li class="chapter" data-level="4.4.2" data-path="04-data.html"><a href="04-data.html#geocode-addresses"><i class="fa fa-check"></i><b>4.4.2</b> Geocode Addresses</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="04-data.html"><a href="04-data.html#merge-data-sets"><i class="fa fa-check"></i><b>4.5</b> Merge data sets</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#reshape-data"><i class="fa fa-check"></i>Reshape Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#join-by-attribute"><i class="fa fa-check"></i>Join by Attribute</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#join-by-location"><i class="fa fa-check"></i>Join by Location</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="04-data.html"><a href="04-data.html#inspect-data"><i class="fa fa-check"></i><b>4.6</b> Inspect Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#thematic-maps"><i class="fa fa-check"></i>Thematic Maps</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#map-overlay"><i class="fa fa-check"></i>Map Overlay</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="04-data.html"><a href="04-data.html#finding-data"><i class="fa fa-check"></i><b>4.7</b> Finding Data</a></li>
<li class="chapter" data-level="" data-path="04-data.html"><a href="04-data.html#resources-3"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05-analysis.html"><a href="05-analysis.html"><i class="fa fa-check"></i><b>5</b> Research Design &amp; Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-analysis.html"><a href="05-analysis.html#research-design"><i class="fa fa-check"></i><b>5.1</b> Research Design</a></li>
<li class="chapter" data-level="5.2" data-path="05-analysis.html"><a href="05-analysis.html#defining-your-position"><i class="fa fa-check"></i><b>5.2</b> Defining your Position</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="05-analysis.html"><a href="05-analysis.html#reflective-mapping"><i class="fa fa-check"></i><b>5.2.1</b> Reflective Mapping</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="05-analysis.html"><a href="05-analysis.html#calculating-spatial-variables"><i class="fa fa-check"></i><b>5.3</b> Calculating Spatial Variables</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="05-analysis.html"><a href="05-analysis.html#buffers"><i class="fa fa-check"></i><b>5.3.1</b> Buffers</a></li>
<li class="chapter" data-level="5.3.2" data-path="05-analysis.html"><a href="05-analysis.html#nearest-resource"><i class="fa fa-check"></i><b>5.3.2</b> Nearest Resource</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="05-analysis.html"><a href="05-analysis.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>5.4</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="05-analysis.html"><a href="05-analysis.html#univariate-and-bivariate-analyses"><i class="fa fa-check"></i><b>5.4.1</b> Univariate and Bivariate Analyses</a></li>
<li class="chapter" data-level="5.4.2" data-path="05-analysis.html"><a href="05-analysis.html#statistical-mapping"><i class="fa fa-check"></i><b>5.4.2</b> Statistical Mapping</a></li>
<li class="chapter" data-level="5.4.3" data-path="05-analysis.html"><a href="05-analysis.html#multivariate-data-analysis"><i class="fa fa-check"></i><b>5.4.3</b> Multivariate Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="05-analysis.html"><a href="05-analysis.html#cartographic-principles"><i class="fa fa-check"></i><b>5.5</b> Cartographic Principles</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="05-analysis.html"><a href="05-analysis.html#effective-sdoh-map-design-entails-several-critical-elements"><i class="fa fa-check"></i><b>5.5.1</b> Effective SDOH map design entails several critical elements</a></li>
<li class="chapter" data-level="" data-path="05-analysis.html"><a href="05-analysis.html#key-elements-of-spatial-data-visualizations"><i class="fa fa-check"></i>Key Elements of Spatial Data Visualizations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="05-analysis.html"><a href="05-analysis.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-appdev.html"><a href="06-appdev.html"><i class="fa fa-check"></i><b>6</b> App Development</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-appdev.html"><a href="06-appdev.html#asset-map-development"><i class="fa fa-check"></i><b>6.1</b> Asset Map Development</a>
<ul>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#umap"><i class="fa fa-check"></i>uMap</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="06-appdev.html"><a href="06-appdev.html#thematic-map-app-development"><i class="fa fa-check"></i><b>6.2</b> Thematic Map App Development</a>
<ul>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#arcgis-online"><i class="fa fa-check"></i>ArcGIS Online</a></li>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#mapbox-gl"><i class="fa fa-check"></i>Mapbox GL</a></li>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#interactive-thematic-map"><i class="fa fa-check"></i>Interactive Thematic Map</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="06-appdev.html"><a href="06-appdev.html#story-map-app-development"><i class="fa fa-check"></i><b>6.3</b> Story Map App Development</a>
<ul>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#arcgis-online-1"><i class="fa fa-check"></i>ArcGIS Online</a></li>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#knight-lab-storymapjs"><i class="fa fa-check"></i>Knight Lab StoryMapJS</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="06-appdev.html"><a href="06-appdev.html#data-dashboard-app-development"><i class="fa fa-check"></i><b>6.4</b> Data Dashboard App Development</a>
<ul>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#tableau-public"><i class="fa fa-check"></i>Tableau Public</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="06-appdev.html"><a href="06-appdev.html#resources-4"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="04-dataR.html"><a href="04-dataR.html"><i class="fa fa-check"></i><b>A</b> Data Wrangling in R</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#tutorials-for-r"><i class="fa fa-check"></i>Tutorials for R</a></li>
<li class="chapter" data-level="A.1" data-path="04-dataR.html"><a href="04-dataR.html#environmental-setup"><i class="fa fa-check"></i><b>A.1</b> Environmental Setup</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#setting-up-the-working-directory"><i class="fa fa-check"></i>Setting Up the Working Directory</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#installing-working-with-r-libraries"><i class="fa fa-check"></i>Installing &amp; Working with R Libraries</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="04-dataR.html"><a href="04-dataR.html#intro-to-spatial-data-1"><i class="fa fa-check"></i><b>A.2</b> Intro to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#load-spatial-data"><i class="fa fa-check"></i>Load Spatial Data</a></li>
<li class="chapter" data-level="A.2.1" data-path="04-dataR.html"><a href="04-dataR.html#adding-a-basemap"><i class="fa fa-check"></i><b>A.2.1</b> Adding a Basemap</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="04-dataR.html"><a href="04-dataR.html#coordinate-reference-systems-1"><i class="fa fa-check"></i><b>A.3</b> Coordinate Reference Systems</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#refine-basic-map"><i class="fa fa-check"></i>Refine Basic Map</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="04-dataR.html"><a href="04-dataR.html#converting-to-spatial-data-1"><i class="fa fa-check"></i><b>A.4</b> Converting to Spatial Data</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="04-dataR.html"><a href="04-dataR.html#convert-csvs-to-spatial-data"><i class="fa fa-check"></i><b>A.4.1</b> Convert CSVs to Spatial Data</a></li>
<li class="chapter" data-level="A.4.2" data-path="04-dataR.html"><a href="04-dataR.html#geocode-addresses-1"><i class="fa fa-check"></i><b>A.4.2</b> Geocode Addresses</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="04-dataR.html"><a href="04-dataR.html#convert-to-spatial-data"><i class="fa fa-check"></i><b>A.5</b> Convert to Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#basic-map-of-points"><i class="fa fa-check"></i>Basic Map of Points</a></li>
</ul></li>
<li class="chapter" data-level="A.6" data-path="04-dataR.html"><a href="04-dataR.html#merge-data-sets-1"><i class="fa fa-check"></i><b>A.6</b> Merge Data sets</a>
<ul>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#reshape-data-1"><i class="fa fa-check"></i>Reshape Data</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#join-by-attribute-1"><i class="fa fa-check"></i>Join by Attribute</a></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#join-by-location-1"><i class="fa fa-check"></i>Join by Location</a></li>
</ul></li>
<li class="chapter" data-level="A.7" data-path="04-dataR.html"><a href="04-dataR.html#inspect-data-1"><i class="fa fa-check"></i><b>A.7</b> Inspect Data</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="04-dataR.html"><a href="04-dataR.html#thematic-maps-1"><i class="fa fa-check"></i><b>A.7.1</b> Thematic Maps</a></li>
<li class="chapter" data-level="A.7.2" data-path="04-dataR.html"><a href="04-dataR.html#map-overlay-1"><i class="fa fa-check"></i><b>A.7.2</b> Map Overlay</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="04-dataR.html"><a href="04-dataR.html#resources-5"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="05-analysisR.html"><a href="05-analysisR.html"><i class="fa fa-check"></i><b>B</b> Research Design &amp; Analysis in R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="05-analysisR.html"><a href="05-analysisR.html#environment-setup-1"><i class="fa fa-check"></i><b>B.1</b> Environment Setup</a></li>
<li class="chapter" data-level="B.2" data-path="05-analysisR.html"><a href="05-analysisR.html#variable-calculations"><i class="fa fa-check"></i><b>B.2</b> Variable Calculations</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="05-analysisR.html"><a href="05-analysisR.html#buffers-1"><i class="fa fa-check"></i><b>B.2.1</b> Buffers</a></li>
<li class="chapter" data-level="B.2.2" data-path="05-analysisR.html"><a href="05-analysisR.html#distance-metrics"><i class="fa fa-check"></i><b>B.2.2</b> Distance Metrics</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="05-analysisR.html"><a href="05-analysisR.html#statistical-mapping-1"><i class="fa fa-check"></i><b>B.3</b> Statistical Mapping</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="05-analysisR.html"><a href="05-analysisR.html#choropleth-maps-1"><i class="fa fa-check"></i><b>B.3.1</b> Choropleth Maps</a></li>
<li class="chapter" data-level="B.3.2" data-path="05-analysisR.html"><a href="05-analysisR.html#cartograms-1"><i class="fa fa-check"></i><b>B.3.2</b> Cartograms</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="06-appdev-code.html"><a href="06-appdev-code.html"><i class="fa fa-check"></i><b>C</b> Coding for app development</a>
<ul>
<li class="chapter" data-level="C.1" data-path="06-appdev-code.html"><a href="06-appdev-code.html#getting-started-with-github-and-github-pages"><i class="fa fa-check"></i><b>C.1</b> Getting Started with Github and Github Pages</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="06-appdev-code.html"><a href="06-appdev-code.html#what-is-a-repository"><i class="fa fa-check"></i><b>C.1.1</b> What is a Repository?</a></li>
<li class="chapter" data-level="C.1.2" data-path="06-appdev-code.html"><a href="06-appdev-code.html#understanding-githubs-url-structure---naming-is-important"><i class="fa fa-check"></i><b>C.1.2</b> Understanding Github’s URL Structure - Naming is important!</a></li>
<li class="chapter" data-level="C.1.3" data-path="06-appdev-code.html"><a href="06-appdev-code.html#creating-an-account"><i class="fa fa-check"></i><b>C.1.3</b> Creating an Account</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="06-appdev-code.html"><a href="06-appdev-code.html#leaflet-map-with-csv-and-geojson-data"><i class="fa fa-check"></i><b>C.2</b> Leaflet Map with CSV and GeoJSON data</a></li>
<li class="chapter" data-level="C.3" data-path="06-appdev-code.html"><a href="06-appdev-code.html#thematic-map-with-html-css"><i class="fa fa-check"></i><b>C.3</b> Thematic Map with HTML &amp; CSS</a></li>
<li class="chapter" data-level="C.4" data-path="06-appdev-code.html"><a href="06-appdev-code.html#dashboards-with-r-shiny"><i class="fa fa-check"></i><b>C.4</b> Dashboards with R Shiny</a>
<ul>
<li class="chapter" data-level="" data-path="06-appdev-code.html"><a href="06-appdev-code.html#getting-started-1"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="C.4.1" data-path="06-appdev-code.html"><a href="06-appdev-code.html#user-interface"><i class="fa fa-check"></i><b>C.4.1</b> User Interface</a></li>
<li class="chapter" data-level="C.4.2" data-path="06-appdev-code.html"><a href="06-appdev-code.html#server"><i class="fa fa-check"></i><b>C.4.2</b> Server</a></li>
<li class="chapter" data-level="C.4.3" data-path="06-appdev-code.html"><a href="06-appdev-code.html#expand-your-prototype"><i class="fa fa-check"></i><b>C.4.3</b> Expand Your Prototype</a></li>
<li class="chapter" data-level="" data-path="06-appdev-code.html"><a href="06-appdev-code.html#more-shiny-resources"><i class="fa fa-check"></i>More Shiny Resources:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html"><i class="fa fa-check"></i>References</a>
<ul>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-1"><i class="fa fa-check"></i>Module 1</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-2"><i class="fa fa-check"></i>Module 2</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-3"><i class="fa fa-check"></i>Module 3</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-4"><i class="fa fa-check"></i>Module 4</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-5"><i class="fa fa-check"></i>Module 5</a></li>
<li class="chapter" data-level="" data-path="08-references.html"><a href="08-references.html#module-6"><i class="fa fa-check"></i>Module 6</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The SDOH &amp; Place Community Toolkit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class="hero-image-container">
  <img class= "hero-image" src="images/banner.png">
</div>
<div id="coding-for-app-development" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">C</span> Coding for app development<a href="06-appdev-code.html#coding-for-app-development" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="getting-started-with-github-and-github-pages" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">C.1</span> Getting Started with Github and Github Pages<a href="06-appdev-code.html#getting-started-with-github-and-github-pages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In these exercises we’ll begin working with a code sharing platform called <a href="https://github.com">Github</a> that is used by software developers, researchers, and hobbyists all around the world. With a free account on Github, you are able to upload code bases and datasets into public repositories, allowing other people to see your work, contribute to it, or build from it.</p>
<p>One especially useful tool that the platform provides is called Github Pages, a mechanism that allows you to turn any single repository into a publicly accessible website for free. Github Pages is a perfect way to create a personal website, blog, or portfolio site, but we can also use it to host and serve simple web maps and visualizations. The following tips will help you get started with Github.</p>
<div id="what-is-a-repository" class="section level3 hasAnchor" number="9.1.1">
<h3><span class="header-section-number">C.1.1</span> What is a Repository?<a href="06-appdev-code.html#what-is-a-repository" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A repository is any collection of code or data that is stored together as a unit. For example, the entire code base for <a href="https://github.com/moodle/moodle">Moodle</a>, or [covid-19-data] downloads from the NY Times.</p>
</div>
<div id="understanding-githubs-url-structure---naming-is-important" class="section level3 hasAnchor" number="9.1.2">
<h3><span class="header-section-number">C.1.2</span> Understanding Github’s URL Structure - Naming is important!<a href="06-appdev-code.html#understanding-githubs-url-structure---naming-is-important" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Github is organized with a simple hierarchy: Account &gt; Repository Name, where accounts can be either individual users, or organizational accounts. For example, our HeRoP lab organization is <a href="https://github.com/healthyregions">healthyregions</a> which means that our repository “sdohplace-toolkit” (this toolkit!) is located at <a href="https://github.com/healthyregions/sdohplace-toolkit">https://github.com/healthyregions/sdohplace-toolkit</a>.</p>
</div>
<div id="creating-an-account" class="section level3 hasAnchor" number="9.1.3">
<h3><span class="header-section-number">C.1.3</span> Creating an Account<a href="06-appdev-code.html#creating-an-account" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you choose a username, pick something simple that can be shared easily, because, as described above, your username will be in public urls all the time. Additionally, when you publish a repository with Github Pages, that user name will become part of the URL for your page.</p>
</div>
</div>
<div id="leaflet-map-with-csv-and-geojson-data" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">C.2</span> Leaflet Map with CSV and GeoJSON data<a href="06-appdev-code.html#leaflet-map-with-csv-and-geojson-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Leaflet is a very popular open source mapping library used to create interactive web maps. Leaflet is written in JavaScript, a programming language that runs in all web browsers, so creating a map with Leaflet will involve at least a bit of looking at and modifying code–HMTL, CSS, and JavaScript which are the foundational components of any webpage.</p>
<div class="tip">
<p><strong>Tip</strong></p>
<p>Our example builds from <a href="https://handsondataviz.org/leaflet-maps-with-csv.html">Leaflet Maps with CSV Data</a> from <a href="https://handsondataviz.org/">HandsOnDataViz</a>, a fantastic collection of guides and recipes for data visualization by Jack Dougherty and Ilya Ilyankou that focus on using open source and accessible technologies. We strongly encourage you to explore all of their other content as well!</p>
</div>
<p>Generally speaking, libraries like Leaflet create web maps by defining an area of a web page, like a canvas, and then loading various geospatial data into that area, allowing users to pan, zoom, inspect, and interact with the content. In this example, we will create and publish a very simple web map using prepared CSV and GeoJSON datasets. At the end of the exercise, you should be able to swap these datasets out with your own, and have a basic understanding of how to modify Leaflet code.</p>
<p>We will do all of our file storage and editing directly in <a href="https://github.com">Github</a>, which will also allow us to immediately make our map publicly visible.</p>
</div>
<div id="thematic-map-with-html-css" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">C.3</span> Thematic Map with HTML &amp; CSS<a href="06-appdev-code.html#thematic-map-with-html-css" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="dashboards-with-r-shiny" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">C.4</span> Dashboards with R Shiny<a href="06-appdev-code.html#dashboards-with-r-shiny" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="getting-started-1" class="section level3 unnumbered hasAnchor">
<h3>Getting Started<a href="06-appdev-code.html#getting-started-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you have a solid sense of R (see previous modules and recommended tutorials), you may be ready to make your first app! To develop an application quickly, we use the <code>shiny</code> package. Shiny is a web application framework for R that makes it easy to build interactive web apps straight from R. This particular application allows users to explore various demographic metrics through interactive maps and charts.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="06-appdev-code.html#cb129-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;shiny&quot;</span>)</span></code></pre></div>
<p>We recommend going through the <a href="https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html">beginner lessons on Shiny applications</a> at Posit before diving into your app development directly. Get familiar with the basics, practice, and explore different example apps for ideas.</p>
<p><img src="images/6-shinyintro.png" style="width:95.0%" /></p>
<p>As you go through these, resist the urge to try to incorporate everything into your own app. Follow the design-thinking process, user input, and diagrams you built in previous modules!</p>
<p>A Shiny app can be contained in a single script, <code>app.R</code>, which will have the following three components:</p>
<ul>
<li><p>a user interface object</p></li>
<li><p>a server function</p></li>
<li><p>a call to the <code>shinyApp</code> function</p></li>
</ul>
<p>The application is structured into three main parts: the user interface (<code>ui</code>), the server logic (<code>server</code>), and the global setup where libraries are loaded and data is prepared.</p>
<div class="float">
<img src="images/06-overview-shinyApp.png" style="width:50.0%" alt="RShiny Application Structure. Source: Coding Club UC3M" />
<div class="figcaption">RShiny Application Structure. Source: <a href="https://codingclubuc3m.rbind.io/post/2018-06-19/">Coding Club UC3M</a></div>
</div>
</div>
<div id="user-interface" class="section level3 hasAnchor" number="9.4.1">
<h3><span class="header-section-number">C.4.1</span> User Interface<a href="06-appdev-code.html#user-interface" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can define the layout of your application using the user inferface, defining what goes where, how it looks, and what events are triggered. Upon loading the site, a default plot may be triggered to be oupit. A user may also select specific items within the user interface, like a variable from a drop-down panel, or sliding a slider.</p>
<p>Using the <a href="https://shiny.posit.co/r/getstarted/shiny-basics/">example</a> from Shiny’s official tutorial, copy and paste the following into a new file you’ll save as <code>app.R</code> in a folder on your computer.</p>
<p>To run within RStudio, click the “Knit” icon at the top of your code.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb130-1"><a href="06-appdev-code.html#cb130-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb130-2"><a href="06-appdev-code.html#cb130-2" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb130-3"><a href="06-appdev-code.html#cb130-3" tabindex="-1"></a></span>
<span id="cb130-4"><a href="06-appdev-code.html#cb130-4" tabindex="-1"></a><span class="co"># Define UI ----</span></span>
<span id="cb130-5"><a href="06-appdev-code.html#cb130-5" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">page_sidebar</span>(</span>
<span id="cb130-6"><a href="06-appdev-code.html#cb130-6" tabindex="-1"></a>)</span>
<span id="cb130-7"><a href="06-appdev-code.html#cb130-7" tabindex="-1"></a></span>
<span id="cb130-8"><a href="06-appdev-code.html#cb130-8" tabindex="-1"></a><span class="co"># Define server logic ----</span></span>
<span id="cb130-9"><a href="06-appdev-code.html#cb130-9" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb130-10"><a href="06-appdev-code.html#cb130-10" tabindex="-1"></a>}</span>
<span id="cb130-11"><a href="06-appdev-code.html#cb130-11" tabindex="-1"></a></span>
<span id="cb130-12"><a href="06-appdev-code.html#cb130-12" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb130-13"><a href="06-appdev-code.html#cb130-13" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Following the same example, add a title to your application, a sidebar, and a main section. In this example, we’ll make a an on SDOH indicators in NYC.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb131-1"><a href="06-appdev-code.html#cb131-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb131-2"><a href="06-appdev-code.html#cb131-2" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb131-3"><a href="06-appdev-code.html#cb131-3" tabindex="-1"></a></span>
<span id="cb131-4"><a href="06-appdev-code.html#cb131-4" tabindex="-1"></a><span class="co"># Define UI ----</span></span>
<span id="cb131-5"><a href="06-appdev-code.html#cb131-5" tabindex="-1"></a>ui <span class="ot">&lt;-</span> </span>
<span id="cb131-6"><a href="06-appdev-code.html#cb131-6" tabindex="-1"></a>  <span class="fu">page_sidebar</span>(</span>
<span id="cb131-7"><a href="06-appdev-code.html#cb131-7" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;NYC SDOH App&quot;</span>,</span>
<span id="cb131-8"><a href="06-appdev-code.html#cb131-8" tabindex="-1"></a>    <span class="at">sidebar =</span> <span class="fu">sidebar</span>(<span class="st">&quot;sidebar&quot;</span>),</span>
<span id="cb131-9"><a href="06-appdev-code.html#cb131-9" tabindex="-1"></a>    <span class="st">&quot;main contents&quot;</span></span>
<span id="cb131-10"><a href="06-appdev-code.html#cb131-10" tabindex="-1"></a>  )</span>
<span id="cb131-11"><a href="06-appdev-code.html#cb131-11" tabindex="-1"></a></span>
<span id="cb131-12"><a href="06-appdev-code.html#cb131-12" tabindex="-1"></a><span class="co"># Define server logic ----</span></span>
<span id="cb131-13"><a href="06-appdev-code.html#cb131-13" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb131-14"><a href="06-appdev-code.html#cb131-14" tabindex="-1"></a>}</span>
<span id="cb131-15"><a href="06-appdev-code.html#cb131-15" tabindex="-1"></a></span>
<span id="cb131-16"><a href="06-appdev-code.html#cb131-16" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb131-17"><a href="06-appdev-code.html#cb131-17" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p>Next, let’s add a drop down variable selection for a variable of interest we’d like to explore in the app. For example, we may want to examine data by self-identified race and ethnicity, as reported by neighborhood via the Census. We’ll add a drop-down widget, and “helper text” to explain what the user should do.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r fold-hide"><code class="sourceCode r"><span id="cb132-1"><a href="06-appdev-code.html#cb132-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb132-2"><a href="06-appdev-code.html#cb132-2" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb132-3"><a href="06-appdev-code.html#cb132-3" tabindex="-1"></a></span>
<span id="cb132-4"><a href="06-appdev-code.html#cb132-4" tabindex="-1"></a><span class="co"># Define UI ----</span></span>
<span id="cb132-5"><a href="06-appdev-code.html#cb132-5" tabindex="-1"></a>ui <span class="ot">&lt;-</span> </span>
<span id="cb132-6"><a href="06-appdev-code.html#cb132-6" tabindex="-1"></a>  <span class="fu">page_sidebar</span>(</span>
<span id="cb132-7"><a href="06-appdev-code.html#cb132-7" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;NYC SDOH App&quot;</span>,</span>
<span id="cb132-8"><a href="06-appdev-code.html#cb132-8" tabindex="-1"></a>    <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb132-9"><a href="06-appdev-code.html#cb132-9" tabindex="-1"></a>      </span>
<span id="cb132-10"><a href="06-appdev-code.html#cb132-10" tabindex="-1"></a>      <span class="fu">helpText</span>(<span class="st">&quot;Select different variables from the dropdown menus to explore the data.&quot;</span>),</span>
<span id="cb132-11"><a href="06-appdev-code.html#cb132-11" tabindex="-1"></a>      </span>
<span id="cb132-12"><a href="06-appdev-code.html#cb132-12" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;Self-Identified Race &amp; Ethnicity:&quot;</span>,</span>
<span id="cb132-13"><a href="06-appdev-code.html#cb132-13" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Percent Black&quot;</span> <span class="ot">=</span> <span class="st">&quot;pctblack&quot;</span>,</span>
<span id="cb132-14"><a href="06-appdev-code.html#cb132-14" tabindex="-1"></a>                              <span class="st">&quot;Percent Hispanic&quot;</span> <span class="ot">=</span> <span class="st">&quot;pcthisp&quot;</span>,</span>
<span id="cb132-15"><a href="06-appdev-code.html#cb132-15" tabindex="-1"></a>                              <span class="st">&quot;Percent White&quot;</span> <span class="ot">=</span> <span class="st">&quot;pctwhite&quot;</span>),</span>
<span id="cb132-16"><a href="06-appdev-code.html#cb132-16" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="st">&quot;pctblack&quot;</span>),</span>
<span id="cb132-17"><a href="06-appdev-code.html#cb132-17" tabindex="-1"></a>    ),</span>
<span id="cb132-18"><a href="06-appdev-code.html#cb132-18" tabindex="-1"></a>  )</span>
<span id="cb132-19"><a href="06-appdev-code.html#cb132-19" tabindex="-1"></a></span>
<span id="cb132-20"><a href="06-appdev-code.html#cb132-20" tabindex="-1"></a><span class="co"># Define server logic ----</span></span>
<span id="cb132-21"><a href="06-appdev-code.html#cb132-21" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb132-22"><a href="06-appdev-code.html#cb132-22" tabindex="-1"></a>}</span>
<span id="cb132-23"><a href="06-appdev-code.html#cb132-23" tabindex="-1"></a></span>
<span id="cb132-24"><a href="06-appdev-code.html#cb132-24" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb132-25"><a href="06-appdev-code.html#cb132-25" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
</summary>
<p>Ensure you’re running each time that you add, edit, or change anything. This helps with the troubleshooting process! By now, your application will be looking like this:</p>
<p><img src="images/06-shiny1.png" style="width:95.0%" /></p>
<p>Continue to explore the different layouts, widgets, themes, and options available to you in the Shiny documentation.</p>
</div>
<div id="server" class="section level3 hasAnchor" number="9.4.2">
<h3><span class="header-section-number">C.4.2</span> Server<a href="06-appdev-code.html#server" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When we’re running the application, we’re actually using our computer as the server. Let’s connect our dropdown to data we’ll load in – NYC data – and use the user selection to generate a map.</p>
<p>We recommend getting the script to work in an R script on its own before plugging in, to confirm that it will work the way you need it to. De-bugging can be tricky in more complex applications, so anything you can do to support your process will be beneficial.</p>
<p>We’ll jump a few steps ahead, to show what the full set up can look like for adding a map that is linked to user input:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="06-appdev-code.html#cb133-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb133-2"><a href="06-appdev-code.html#cb133-2" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb133-3"><a href="06-appdev-code.html#cb133-3" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb133-4"><a href="06-appdev-code.html#cb133-4" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb133-5"><a href="06-appdev-code.html#cb133-5" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb133-6"><a href="06-appdev-code.html#cb133-6" tabindex="-1"></a></span>
<span id="cb133-7"><a href="06-appdev-code.html#cb133-7" tabindex="-1"></a><span class="co"># Load data ----</span></span>
<span id="cb133-8"><a href="06-appdev-code.html#cb133-8" tabindex="-1"></a>nyc_data <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;NYC_nbrhd_data.geojson&quot;</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb133-9"><a href="06-appdev-code.html#cb133-9" tabindex="-1"></a>nyc_data <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(nyc_data)</span>
<span id="cb133-10"><a href="06-appdev-code.html#cb133-10" tabindex="-1"></a>map_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nyc_data, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb133-11"><a href="06-appdev-code.html#cb133-11" tabindex="-1"></a></span>
<span id="cb133-12"><a href="06-appdev-code.html#cb133-12" tabindex="-1"></a><span class="co"># Define UI ----</span></span>
<span id="cb133-13"><a href="06-appdev-code.html#cb133-13" tabindex="-1"></a>ui <span class="ot">&lt;-</span> </span>
<span id="cb133-14"><a href="06-appdev-code.html#cb133-14" tabindex="-1"></a>  <span class="fu">page_sidebar</span>(</span>
<span id="cb133-15"><a href="06-appdev-code.html#cb133-15" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;NYC SDOH App&quot;</span>,</span>
<span id="cb133-16"><a href="06-appdev-code.html#cb133-16" tabindex="-1"></a>    <span class="at">sidebar =</span> <span class="fu">sidebar</span>(</span>
<span id="cb133-17"><a href="06-appdev-code.html#cb133-17" tabindex="-1"></a>      </span>
<span id="cb133-18"><a href="06-appdev-code.html#cb133-18" tabindex="-1"></a>      <span class="fu">helpText</span>(<span class="st">&quot;Select different variables from the dropdown menus to explore the data.&quot;</span>),</span>
<span id="cb133-19"><a href="06-appdev-code.html#cb133-19" tabindex="-1"></a>      </span>
<span id="cb133-20"><a href="06-appdev-code.html#cb133-20" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;Self-Identified Race &amp; Ethnicity:&quot;</span>,</span>
<span id="cb133-21"><a href="06-appdev-code.html#cb133-21" tabindex="-1"></a>                  <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Percent Black&quot;</span> <span class="ot">=</span> <span class="st">&quot;pctblack&quot;</span>,</span>
<span id="cb133-22"><a href="06-appdev-code.html#cb133-22" tabindex="-1"></a>                              <span class="st">&quot;Percent Hispanic&quot;</span> <span class="ot">=</span> <span class="st">&quot;pcthisp&quot;</span>,</span>
<span id="cb133-23"><a href="06-appdev-code.html#cb133-23" tabindex="-1"></a>                              <span class="st">&quot;Percent White&quot;</span> <span class="ot">=</span> <span class="st">&quot;pctwhite&quot;</span>),</span>
<span id="cb133-24"><a href="06-appdev-code.html#cb133-24" tabindex="-1"></a>                  <span class="at">selected =</span> <span class="st">&quot;pctblack&quot;</span>)),</span>
<span id="cb133-25"><a href="06-appdev-code.html#cb133-25" tabindex="-1"></a>      </span>
<span id="cb133-26"><a href="06-appdev-code.html#cb133-26" tabindex="-1"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb133-27"><a href="06-appdev-code.html#cb133-27" tabindex="-1"></a>        <span class="do">## Add a map</span></span>
<span id="cb133-28"><a href="06-appdev-code.html#cb133-28" tabindex="-1"></a>        (<span class="fu">leafletOutput</span>(<span class="st">&quot;map&quot;</span>, <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>)</span>
<span id="cb133-29"><a href="06-appdev-code.html#cb133-29" tabindex="-1"></a>        )))</span>
<span id="cb133-30"><a href="06-appdev-code.html#cb133-30" tabindex="-1"></a>  </span>
<span id="cb133-31"><a href="06-appdev-code.html#cb133-31" tabindex="-1"></a><span class="co"># Define server logic ----</span></span>
<span id="cb133-32"><a href="06-appdev-code.html#cb133-32" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb133-33"><a href="06-appdev-code.html#cb133-33" tabindex="-1"></a>    </span>
<span id="cb133-34"><a href="06-appdev-code.html#cb133-34" tabindex="-1"></a>    <span class="co"># Map output for Racial Demographics</span></span>
<span id="cb133-35"><a href="06-appdev-code.html#cb133-35" tabindex="-1"></a>    output<span class="sc">$</span>map <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb133-36"><a href="06-appdev-code.html#cb133-36" tabindex="-1"></a></span>
<span id="cb133-37"><a href="06-appdev-code.html#cb133-37" tabindex="-1"></a>      valid_data <span class="ot">&lt;-</span> map_data[<span class="sc">!</span><span class="fu">is.na</span>(map_data[[input<span class="sc">$</span>color]]), ]</span>
<span id="cb133-38"><a href="06-appdev-code.html#cb133-38" tabindex="-1"></a>      </span>
<span id="cb133-39"><a href="06-appdev-code.html#cb133-39" tabindex="-1"></a>      pal <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;PuBuGn&quot;</span>, valid_data[[input<span class="sc">$</span>color]], <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb133-40"><a href="06-appdev-code.html#cb133-40" tabindex="-1"></a>      </span>
<span id="cb133-41"><a href="06-appdev-code.html#cb133-41" tabindex="-1"></a>      <span class="fu">leaflet</span>(valid_data) <span class="sc">%&gt;%</span></span>
<span id="cb133-42"><a href="06-appdev-code.html#cb133-42" tabindex="-1"></a>        <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb133-43"><a href="06-appdev-code.html#cb133-43" tabindex="-1"></a>        <span class="fu">addPolygons</span>(</span>
<span id="cb133-44"><a href="06-appdev-code.html#cb133-44" tabindex="-1"></a>          <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal</span>(valid_data[[input<span class="sc">$</span>color]]),</span>
<span id="cb133-45"><a href="06-appdev-code.html#cb133-45" tabindex="-1"></a>          <span class="at">fillOpacity =</span> <span class="fl">0.7</span>, <span class="at">weight =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb133-46"><a href="06-appdev-code.html#cb133-46" tabindex="-1"></a>          <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(NTAName, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb133-47"><a href="06-appdev-code.html#cb133-47" tabindex="-1"></a>                         <span class="fu">paste</span>(input<span class="sc">$</span>color, <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(valid_data[[input<span class="sc">$</span>color]], <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>))</span>
<span id="cb133-48"><a href="06-appdev-code.html#cb133-48" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb133-49"><a href="06-appdev-code.html#cb133-49" tabindex="-1"></a>        <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">73.935242</span>, <span class="at">lat =</span> <span class="fl">40.730610</span>, <span class="at">zoom =</span> <span class="dv">10</span>)</span>
<span id="cb133-50"><a href="06-appdev-code.html#cb133-50" tabindex="-1"></a>    })</span>
<span id="cb133-51"><a href="06-appdev-code.html#cb133-51" tabindex="-1"></a>  }</span>
<span id="cb133-52"><a href="06-appdev-code.html#cb133-52" tabindex="-1"></a></span>
<span id="cb133-53"><a href="06-appdev-code.html#cb133-53" tabindex="-1"></a><span class="co"># Run the app ----</span></span>
<span id="cb133-54"><a href="06-appdev-code.html#cb133-54" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p><img src="images/5-ShinyAppV1.png" style="width:95.0%" /></p>
<p>Inspect how the map output call was added to the UI. In the server function, the map data is slightly cleaned (from debugging in a script on its own), and a color palette is indicated using a ColorBrewer selection. Then, we use leaflet to visualize the variable selected by the user. We have found that leaflet is more responsive than tmap when using Shiny apps, though be sure to explore new options on your own!</p>
</div>
<div id="expand-your-prototype" class="section level3 hasAnchor" number="9.4.3">
<h3><span class="header-section-number">C.4.3</span> Expand Your Prototype<a href="06-appdev-code.html#expand-your-prototype" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="updated-user-interface" class="section level4 hasAnchor" number="9.4.3.1">
<h4><span class="header-section-number">C.4.3.1</span> Updated User Interface<a href="06-appdev-code.html#updated-user-interface" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In our extension, we want the final UI organize into three main tabs, allowing users to interactively explore different facets of the NYC neighborhood data. For this example, we’ll try using tabs instead of a sidebar. Try blending both styles, and keeping the bootstrap library used in our initial example as a challenge.</p>
<div id="tab-1-map-racial-demographics" class="section level5 hasAnchor" number="9.4.3.1.1">
<h5><span class="header-section-number">C.4.3.1.1</span> Tab 1: Map &amp; Racial Demographics<a href="06-appdev-code.html#tab-1-map-racial-demographics" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In the first tab, we’ll features a map and a demographic chart, with controls for selecting demographic variables and neighborhoods. Here are the explanation for some functions that we used below:</p>
<ul>
<li><code>selectInput</code> for variable of interest: Allows users to select which <code>variable</code> statistic to visualize on the map.</li>
<li><code>selectInput</code> for neighborhood: Enables users to pick a specific neighborhood for detailed demographic breakdown in the chart.</li>
<li><code>leafletOutput</code> and <code>plotlyOutput</code>: Reserved spaces in the UI for displaying the map and the chart respectively.</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="06-appdev-code.html#cb134-1" tabindex="-1"></a><span class="co"># Define server logic for the first tab</span></span>
<span id="cb134-2"><a href="06-appdev-code.html#cb134-2" tabindex="-1"></a>tab1_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb134-3"><a href="06-appdev-code.html#cb134-3" tabindex="-1"></a>  <span class="co"># Map output for Racial Demographics</span></span>
<span id="cb134-4"><a href="06-appdev-code.html#cb134-4" tabindex="-1"></a>  output<span class="sc">$</span>map <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb134-5"><a href="06-appdev-code.html#cb134-5" tabindex="-1"></a>    map_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nyc_data, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb134-6"><a href="06-appdev-code.html#cb134-6" tabindex="-1"></a>    </span>
<span id="cb134-7"><a href="06-appdev-code.html#cb134-7" tabindex="-1"></a>    valid_data <span class="ot">&lt;-</span> map_data[<span class="sc">!</span><span class="fu">is.na</span>(map_data[[input<span class="sc">$</span>color]]), ]</span>
<span id="cb134-8"><a href="06-appdev-code.html#cb134-8" tabindex="-1"></a>    pal <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;PuBuGn&quot;</span>, valid_data[[input<span class="sc">$</span>color]], <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb134-9"><a href="06-appdev-code.html#cb134-9" tabindex="-1"></a>    </span>
<span id="cb134-10"><a href="06-appdev-code.html#cb134-10" tabindex="-1"></a>    <span class="fu">leaflet</span>(valid_data) <span class="sc">%&gt;%</span></span>
<span id="cb134-11"><a href="06-appdev-code.html#cb134-11" tabindex="-1"></a>      <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb134-12"><a href="06-appdev-code.html#cb134-12" tabindex="-1"></a>      <span class="fu">addPolygons</span>(</span>
<span id="cb134-13"><a href="06-appdev-code.html#cb134-13" tabindex="-1"></a>        <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal</span>(valid_data[[input<span class="sc">$</span>color]]),</span>
<span id="cb134-14"><a href="06-appdev-code.html#cb134-14" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.7</span>, <span class="at">weight =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb134-15"><a href="06-appdev-code.html#cb134-15" tabindex="-1"></a>        <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(NTAName, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb134-16"><a href="06-appdev-code.html#cb134-16" tabindex="-1"></a>                       <span class="fu">paste</span>(input<span class="sc">$</span>color, <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(valid_data[[input<span class="sc">$</span>color]], <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>))</span>
<span id="cb134-17"><a href="06-appdev-code.html#cb134-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb134-18"><a href="06-appdev-code.html#cb134-18" tabindex="-1"></a>      <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">73.935242</span>, <span class="at">lat =</span> <span class="fl">40.730610</span>, <span class="at">zoom =</span> <span class="dv">10</span>)</span>
<span id="cb134-19"><a href="06-appdev-code.html#cb134-19" tabindex="-1"></a>  })</span>
<span id="cb134-20"><a href="06-appdev-code.html#cb134-20" tabindex="-1"></a>  </span>
<span id="cb134-21"><a href="06-appdev-code.html#cb134-21" tabindex="-1"></a>  <span class="co"># Racial Demographics chart</span></span>
<span id="cb134-22"><a href="06-appdev-code.html#cb134-22" tabindex="-1"></a>  output<span class="sc">$</span>racialDemoChart <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb134-23"><a href="06-appdev-code.html#cb134-23" tabindex="-1"></a>    chart_data <span class="ot">&lt;-</span> nyc_data[nyc_data<span class="sc">$</span>NTAName <span class="sc">==</span> input<span class="sc">$</span>neighborhood, ]</span>
<span id="cb134-24"><a href="06-appdev-code.html#cb134-24" tabindex="-1"></a>    </span>
<span id="cb134-25"><a href="06-appdev-code.html#cb134-25" tabindex="-1"></a>    <span class="co"># Lose the spatial component for the chart data</span></span>
<span id="cb134-26"><a href="06-appdev-code.html#cb134-26" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">st_drop_geometry</span>(chart_data)</span>
<span id="cb134-27"><a href="06-appdev-code.html#cb134-27" tabindex="-1"></a>    </span>
<span id="cb134-28"><a href="06-appdev-code.html#cb134-28" tabindex="-1"></a>    <span class="co"># Subselect to only variables we&#39;re interested in</span></span>
<span id="cb134-29"><a href="06-appdev-code.html#cb134-29" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> racial_data[, <span class="fu">c</span>(<span class="st">&quot;pctblack&quot;</span>, <span class="st">&quot;pcthisp&quot;</span>, <span class="st">&quot;pctwhite&quot;</span>, <span class="st">&quot;pctapi&quot;</span>, <span class="st">&quot;pctother&quot;</span>)]</span>
<span id="cb134-30"><a href="06-appdev-code.html#cb134-30" tabindex="-1"></a>    </span>
<span id="cb134-31"><a href="06-appdev-code.html#cb134-31" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">t</span>(racial_data)</span>
<span id="cb134-32"><a href="06-appdev-code.html#cb134-32" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(racial_data)</span>
<span id="cb134-33"><a href="06-appdev-code.html#cb134-33" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">Race =</span> <span class="fu">rownames</span>(racial_data), <span class="at">Percentage =</span> racial_data[, <span class="dv">1</span>])</span>
<span id="cb134-34"><a href="06-appdev-code.html#cb134-34" tabindex="-1"></a>    <span class="fu">rownames</span>(racial_data) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb134-35"><a href="06-appdev-code.html#cb134-35" tabindex="-1"></a>    </span>
<span id="cb134-36"><a href="06-appdev-code.html#cb134-36" tabindex="-1"></a>    <span class="fu">plot_ly</span>(<span class="at">data =</span> <span class="fu">as.data.frame</span>(racial_data), <span class="at">x =</span> <span class="sc">~</span>Race, <span class="at">y =</span> <span class="sc">~</span>Percentage, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>Race) <span class="sc">%&gt;%</span></span>
<span id="cb134-37"><a href="06-appdev-code.html#cb134-37" tabindex="-1"></a>      <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Self-Identified Race - &quot;</span>, input<span class="sc">$</span>neighborhood),</span>
<span id="cb134-38"><a href="06-appdev-code.html#cb134-38" tabindex="-1"></a>             <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Race&quot;</span>),</span>
<span id="cb134-39"><a href="06-appdev-code.html#cb134-39" tabindex="-1"></a>             <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Percentage&quot;</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">tickvals =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)))</span>
<span id="cb134-40"><a href="06-appdev-code.html#cb134-40" tabindex="-1"></a>  })</span>
<span id="cb134-41"><a href="06-appdev-code.html#cb134-41" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="tab-2-socioeconomic-demographics" class="section level5 hasAnchor" number="9.4.3.1.2">
<h5><span class="header-section-number">C.4.3.1.2</span> Tab 2: Socioeconomic Demographics<a href="06-appdev-code.html#tab-2-socioeconomic-demographics" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Similar in structure to Tab 1, now let’s create the Tab 2, which focuses on socioeconomic indicators such as poverty levels and rent burden.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="06-appdev-code.html#cb135-1" tabindex="-1"></a>tab2_ui <span class="ot">&lt;-</span> <span class="fu">tabPanel</span>(<span class="st">&quot;Socioeconomic Demographics&quot;</span>,</span>
<span id="cb135-2"><a href="06-appdev-code.html#cb135-2" tabindex="-1"></a>                    <span class="fu">sidebarLayout</span>(</span>
<span id="cb135-3"><a href="06-appdev-code.html#cb135-3" tabindex="-1"></a>                      <span class="fu">sidebarPanel</span>(</span>
<span id="cb135-4"><a href="06-appdev-code.html#cb135-4" tabindex="-1"></a>                        <span class="fu">selectInput</span>(<span class="st">&quot;color_socio&quot;</span>, <span class="st">&quot;Demographic variable:&quot;</span>,</span>
<span id="cb135-5"><a href="06-appdev-code.html#cb135-5" tabindex="-1"></a>                                    <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Percent in Poverty&quot;</span> <span class="ot">=</span> <span class="st">&quot;pctpov&quot;</span>,</span>
<span id="cb135-6"><a href="06-appdev-code.html#cb135-6" tabindex="-1"></a>                                                <span class="st">&quot;Rent &lt; 30% of Income&quot;</span> <span class="ot">=</span> <span class="st">&quot;rent.30&quot;</span>,</span>
<span id="cb135-7"><a href="06-appdev-code.html#cb135-7" tabindex="-1"></a>                                                <span class="st">&quot;Rent &lt; 50% of Income&quot;</span> <span class="ot">=</span> <span class="st">&quot;rent.50&quot;</span>),</span>
<span id="cb135-8"><a href="06-appdev-code.html#cb135-8" tabindex="-1"></a>                                    <span class="at">selected =</span> <span class="st">&quot;pctpov&quot;</span>),</span>
<span id="cb135-9"><a href="06-appdev-code.html#cb135-9" tabindex="-1"></a>                        <span class="fu">selectInput</span>(<span class="st">&quot;neighborhood_socio&quot;</span>, <span class="st">&quot;Select Neighborhood:&quot;</span>,</span>
<span id="cb135-10"><a href="06-appdev-code.html#cb135-10" tabindex="-1"></a>                                    <span class="at">choices =</span> nyc_data<span class="sc">$</span>NTAName,</span>
<span id="cb135-11"><a href="06-appdev-code.html#cb135-11" tabindex="-1"></a>                                    <span class="at">selected =</span> <span class="st">&quot;Pelham Bay-Country Club-City Island&quot;</span>),</span>
<span id="cb135-12"><a href="06-appdev-code.html#cb135-12" tabindex="-1"></a>                        <span class="fu">helpText</span>(<span class="st">&quot;Data source: NYC Neighborhood Data&quot;</span>),</span>
<span id="cb135-13"><a href="06-appdev-code.html#cb135-13" tabindex="-1"></a>                        <span class="fu">br</span>(),</span>
<span id="cb135-14"><a href="06-appdev-code.html#cb135-14" tabindex="-1"></a>                        <span class="fu">h3</span>(<span class="st">&quot;About This App&quot;</span>),</span>
<span id="cb135-15"><a href="06-appdev-code.html#cb135-15" tabindex="-1"></a>                        <span class="fu">p</span>(<span class="st">&quot;This application provides a visual representation of demographic and health data across New York City&#39;s neighborhoods.&quot;</span>),</span>
<span id="cb135-16"><a href="06-appdev-code.html#cb135-16" tabindex="-1"></a>                      ),</span>
<span id="cb135-17"><a href="06-appdev-code.html#cb135-17" tabindex="-1"></a>                      <span class="fu">mainPanel</span>(</span>
<span id="cb135-18"><a href="06-appdev-code.html#cb135-18" tabindex="-1"></a>                        <span class="fu">fluidRow</span>(<span class="fu">leafletOutput</span>(<span class="st">&quot;map_socio&quot;</span>),</span>
<span id="cb135-19"><a href="06-appdev-code.html#cb135-19" tabindex="-1"></a>                                 <span class="fu">br</span>(),</span>
<span id="cb135-20"><a href="06-appdev-code.html#cb135-20" tabindex="-1"></a>                        <span class="fu">fluidRow</span>(<span class="fu">plotlyOutput</span>(<span class="st">&quot;socioDemoChart&quot;</span>))</span>
<span id="cb135-21"><a href="06-appdev-code.html#cb135-21" tabindex="-1"></a>                        )</span>
<span id="cb135-22"><a href="06-appdev-code.html#cb135-22" tabindex="-1"></a>                      )</span>
<span id="cb135-23"><a href="06-appdev-code.html#cb135-23" tabindex="-1"></a>                    )</span>
<span id="cb135-24"><a href="06-appdev-code.html#cb135-24" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="tab-3-severe-maternal-morbidity-preterm-birth-rates" class="section level5 hasAnchor" number="9.4.3.1.3">
<h5><span class="header-section-number">C.4.3.1.3</span> Tab 3: Severe Maternal Morbidity &amp; Preterm Birth Rates<a href="06-appdev-code.html#tab-3-severe-maternal-morbidity-preterm-birth-rates" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In Tab 3, we want to introduces more health-related variables, displaying a map and a scatter plot. The scatter plot takes time to load, so further de-bugging may be necessary. Try alternate libraries, styles, and new approaches to refine further.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="06-appdev-code.html#cb136-1" tabindex="-1"></a>tab3_ui <span class="ot">&lt;-</span> <span class="fu">tabPanel</span>(<span class="st">&quot;Severe Maternal Morbidity &amp; Preterm Birth Rates&quot;</span>,</span>
<span id="cb136-2"><a href="06-appdev-code.html#cb136-2" tabindex="-1"></a>                    <span class="fu">sidebarLayout</span>(</span>
<span id="cb136-3"><a href="06-appdev-code.html#cb136-3" tabindex="-1"></a>                      <span class="fu">sidebarPanel</span>(</span>
<span id="cb136-4"><a href="06-appdev-code.html#cb136-4" tabindex="-1"></a>                        <span class="fu">selectInput</span>(<span class="st">&quot;color_health&quot;</span>, <span class="st">&quot;Health variable:&quot;</span>,</span>
<span id="cb136-5"><a href="06-appdev-code.html#cb136-5" tabindex="-1"></a>                                    <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Severe Maternal Morbidity Rate&quot;</span> <span class="ot">=</span> <span class="st">&quot;smmrate&quot;</span>,</span>
<span id="cb136-6"><a href="06-appdev-code.html#cb136-6" tabindex="-1"></a>                                                <span class="st">&quot;Preterm Birth Rate&quot;</span> <span class="ot">=</span> <span class="st">&quot;ptbrate&quot;</span>),</span>
<span id="cb136-7"><a href="06-appdev-code.html#cb136-7" tabindex="-1"></a>                                    <span class="at">selected =</span> <span class="st">&quot;smmrate&quot;</span>),</span>
<span id="cb136-8"><a href="06-appdev-code.html#cb136-8" tabindex="-1"></a>                        <span class="fu">helpText</span>(<span class="st">&quot;Data source: NYC Neighborhood Data&quot;</span>),</span>
<span id="cb136-9"><a href="06-appdev-code.html#cb136-9" tabindex="-1"></a>                        <span class="fu">br</span>(),</span>
<span id="cb136-10"><a href="06-appdev-code.html#cb136-10" tabindex="-1"></a>                        <span class="fu">h3</span>(<span class="st">&quot;About This App&quot;</span>),</span>
<span id="cb136-11"><a href="06-appdev-code.html#cb136-11" tabindex="-1"></a>                        <span class="fu">p</span>(<span class="st">&quot;This application provides a visual representation of demographic and health data across New York City&#39;s neighborhoods.&quot;</span>),</span>
<span id="cb136-12"><a href="06-appdev-code.html#cb136-12" tabindex="-1"></a>                      ),</span>
<span id="cb136-13"><a href="06-appdev-code.html#cb136-13" tabindex="-1"></a>                      <span class="fu">mainPanel</span>(</span>
<span id="cb136-14"><a href="06-appdev-code.html#cb136-14" tabindex="-1"></a>                        <span class="fu">fluidRow</span>(<span class="fu">leafletOutput</span>(<span class="st">&quot;map_health&quot;</span>),</span>
<span id="cb136-15"><a href="06-appdev-code.html#cb136-15" tabindex="-1"></a>                                 <span class="fu">br</span>(),</span>
<span id="cb136-16"><a href="06-appdev-code.html#cb136-16" tabindex="-1"></a>                        <span class="fu">fluidRow</span>(<span class="fu">plotlyOutput</span>(<span class="st">&quot;healthScatterChart&quot;</span>))</span>
<span id="cb136-17"><a href="06-appdev-code.html#cb136-17" tabindex="-1"></a>                        )</span>
<span id="cb136-18"><a href="06-appdev-code.html#cb136-18" tabindex="-1"></a>                      )</span>
<span id="cb136-19"><a href="06-appdev-code.html#cb136-19" tabindex="-1"></a>                    )</span>
<span id="cb136-20"><a href="06-appdev-code.html#cb136-20" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="tab-4-about" class="section level5 hasAnchor" number="9.4.3.1.4">
<h5><span class="header-section-number">C.4.3.1.4</span> Tab 4: About<a href="06-appdev-code.html#tab-4-about" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Finally, we also want to include a Tab 4 that provides contextual information about the application, explaining its purpose and the data source.</p>
<p>We are making a prototype, so use some “Lorem Ipsum” placeholder language that we can update in the future.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="06-appdev-code.html#cb137-1" tabindex="-1"></a>tab4_ui <span class="ot">&lt;-</span> <span class="fu">tabPanel</span>(<span class="st">&quot;About&quot;</span>,</span>
<span id="cb137-2"><a href="06-appdev-code.html#cb137-2" tabindex="-1"></a>                    <span class="fu">h3</span>(<span class="st">&quot;About This App&quot;</span>),</span>
<span id="cb137-3"><a href="06-appdev-code.html#cb137-3" tabindex="-1"></a>                    <span class="fu">p</span>(<span class="st">&quot;This application provides a visual representation of demographic and health data across New York City&#39;s neighborhoods. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nisi porta lorem mollis aliquam ut. &quot;</span>),</span>
<span id="cb137-4"><a href="06-appdev-code.html#cb137-4" tabindex="-1"></a>                    <span class="fu">p</span>(<span class="st">&quot;Select different demographic and health variables from the dropdown menus to explore the data. Nulla pellentesque dignissim enim sit amet venenatis urna cursus. Eget gravida cum sociis natoque penatibus. Feugiat sed lectus vestibulum mattis ullamcorper velit sed ullamcorper morbi. Mi ipsum faucibus vitae aliquet nec ullamcorper sit. &quot;</span>),</span>
<span id="cb137-5"><a href="06-appdev-code.html#cb137-5" tabindex="-1"></a>                    <span class="fu">p</span>(<span class="st">&quot;Data source: NYC Neighborhood Data, provided in GeoJSON format and visualized using Leaflet and Plotly in a Shiny application.&quot;</span>)</span>
<span id="cb137-6"><a href="06-appdev-code.html#cb137-6" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="define-server-logic" class="section level4 hasAnchor" number="9.4.3.2">
<h4><span class="header-section-number">C.4.3.2</span> Define Server Logic<a href="06-appdev-code.html#define-server-logic" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After define the user interface, we will move on to define the server logic. It processes user inputs from the UI and updates the outputs (maps and charts). It dynamically reacts to user interactions such as selecting a neighborhood or a demographic variable.</p>
<div id="server-logic-for-tab-1" class="section level5 hasAnchor" number="9.4.3.2.1">
<h5><span class="header-section-number">C.4.3.2.1</span> Server Logic for Tab 1:<a href="06-appdev-code.html#server-logic-for-tab-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Now, we will create server code to handle the dynamic visualization of racial demographics within New York City neighborhoods in Tab 1. It renders an interactive map and a bar chart based on user inputs, showing the distribution of different racial groups. The map highlights neighborhoods with varying demographic densities, while the bar chart provides detailed statistics for a selected neighborhood.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="06-appdev-code.html#cb138-1" tabindex="-1"></a>tab1_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb138-2"><a href="06-appdev-code.html#cb138-2" tabindex="-1"></a>  <span class="co"># Map output for Racial Demographics</span></span>
<span id="cb138-3"><a href="06-appdev-code.html#cb138-3" tabindex="-1"></a>  output<span class="sc">$</span>map <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb138-4"><a href="06-appdev-code.html#cb138-4" tabindex="-1"></a>    map_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nyc_data, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb138-5"><a href="06-appdev-code.html#cb138-5" tabindex="-1"></a>    </span>
<span id="cb138-6"><a href="06-appdev-code.html#cb138-6" tabindex="-1"></a>    valid_data <span class="ot">&lt;-</span> map_data[<span class="sc">!</span><span class="fu">is.na</span>(map_data[[input<span class="sc">$</span>color]]), ]</span>
<span id="cb138-7"><a href="06-appdev-code.html#cb138-7" tabindex="-1"></a>    pal <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;YlOrRd&quot;</span>, valid_data[[input<span class="sc">$</span>color]], <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb138-8"><a href="06-appdev-code.html#cb138-8" tabindex="-1"></a>    </span>
<span id="cb138-9"><a href="06-appdev-code.html#cb138-9" tabindex="-1"></a>    <span class="fu">leaflet</span>(valid_data) <span class="sc">%&gt;%</span></span>
<span id="cb138-10"><a href="06-appdev-code.html#cb138-10" tabindex="-1"></a>      <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb138-11"><a href="06-appdev-code.html#cb138-11" tabindex="-1"></a>      <span class="fu">addPolygons</span>(</span>
<span id="cb138-12"><a href="06-appdev-code.html#cb138-12" tabindex="-1"></a>        <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal</span>(valid_data[[input<span class="sc">$</span>color]]),</span>
<span id="cb138-13"><a href="06-appdev-code.html#cb138-13" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.7</span>, <span class="at">weight =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb138-14"><a href="06-appdev-code.html#cb138-14" tabindex="-1"></a>        <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(NTAName, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb138-15"><a href="06-appdev-code.html#cb138-15" tabindex="-1"></a>                       <span class="fu">paste</span>(input<span class="sc">$</span>color, <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(valid_data[[input<span class="sc">$</span>color]], <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>))</span>
<span id="cb138-16"><a href="06-appdev-code.html#cb138-16" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb138-17"><a href="06-appdev-code.html#cb138-17" tabindex="-1"></a>      <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">73.935242</span>, <span class="at">lat =</span> <span class="fl">40.730610</span>, <span class="at">zoom =</span> <span class="dv">10</span>)</span>
<span id="cb138-18"><a href="06-appdev-code.html#cb138-18" tabindex="-1"></a>  })</span>
<span id="cb138-19"><a href="06-appdev-code.html#cb138-19" tabindex="-1"></a>  </span>
<span id="cb138-20"><a href="06-appdev-code.html#cb138-20" tabindex="-1"></a>  <span class="co"># Racial Demographics chart</span></span>
<span id="cb138-21"><a href="06-appdev-code.html#cb138-21" tabindex="-1"></a>  output<span class="sc">$</span>racialDemoChart <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb138-22"><a href="06-appdev-code.html#cb138-22" tabindex="-1"></a>    chart_data <span class="ot">&lt;-</span> nyc_data[nyc_data<span class="sc">$</span>NTAName <span class="sc">==</span> input<span class="sc">$</span>neighborhood, ]</span>
<span id="cb138-23"><a href="06-appdev-code.html#cb138-23" tabindex="-1"></a>    </span>
<span id="cb138-24"><a href="06-appdev-code.html#cb138-24" tabindex="-1"></a>    <span class="co"># Extract data and remove &quot;geometry&quot; column</span></span>
<span id="cb138-25"><a href="06-appdev-code.html#cb138-25" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(chart_data)</span>
<span id="cb138-26"><a href="06-appdev-code.html#cb138-26" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> racial_data[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(racial_data) <span class="sc">==</span> <span class="st">&quot;geometry&quot;</span>)]</span>
<span id="cb138-27"><a href="06-appdev-code.html#cb138-27" tabindex="-1"></a>    </span>
<span id="cb138-28"><a href="06-appdev-code.html#cb138-28" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> racial_data[, <span class="fu">c</span>(<span class="st">&quot;pctblack&quot;</span>, <span class="st">&quot;pcthisp&quot;</span>, <span class="st">&quot;pctwhite&quot;</span>, <span class="st">&quot;pctapi&quot;</span>, <span class="st">&quot;pctother&quot;</span>)]</span>
<span id="cb138-29"><a href="06-appdev-code.html#cb138-29" tabindex="-1"></a>    </span>
<span id="cb138-30"><a href="06-appdev-code.html#cb138-30" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">t</span>(racial_data)</span>
<span id="cb138-31"><a href="06-appdev-code.html#cb138-31" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(racial_data)</span>
<span id="cb138-32"><a href="06-appdev-code.html#cb138-32" tabindex="-1"></a>    racial_data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">Race =</span> <span class="fu">rownames</span>(racial_data), <span class="at">Percentage =</span> racial_data[, <span class="dv">1</span>])</span>
<span id="cb138-33"><a href="06-appdev-code.html#cb138-33" tabindex="-1"></a>    <span class="fu">rownames</span>(racial_data) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb138-34"><a href="06-appdev-code.html#cb138-34" tabindex="-1"></a>    </span>
<span id="cb138-35"><a href="06-appdev-code.html#cb138-35" tabindex="-1"></a>    <span class="fu">plot_ly</span>(<span class="at">data =</span> <span class="fu">as.data.frame</span>(racial_data), <span class="at">x =</span> <span class="sc">~</span>Race, <span class="at">y =</span> <span class="sc">~</span>Percentage, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>Race) <span class="sc">%&gt;%</span></span>
<span id="cb138-36"><a href="06-appdev-code.html#cb138-36" tabindex="-1"></a>      <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Racial Demographics -&quot;</span>, input<span class="sc">$</span>neighborhood),</span>
<span id="cb138-37"><a href="06-appdev-code.html#cb138-37" tabindex="-1"></a>             <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Race&quot;</span>),</span>
<span id="cb138-38"><a href="06-appdev-code.html#cb138-38" tabindex="-1"></a>             <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Percentage&quot;</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">tickvals =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)))</span>
<span id="cb138-39"><a href="06-appdev-code.html#cb138-39" tabindex="-1"></a>  })</span>
<span id="cb138-40"><a href="06-appdev-code.html#cb138-40" tabindex="-1"></a>}</span></code></pre></div>
<p>The server functions for other tabs follow a similar structure but focus on different data attributes. So, let’s define the server logic for other three tabs.</p>
</div>
<div id="server-logic-for-tab-2" class="section level5 hasAnchor" number="9.4.3.2.2">
<h5><span class="header-section-number">C.4.3.2.2</span> Server Logic for Tab 2:<a href="06-appdev-code.html#server-logic-for-tab-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="06-appdev-code.html#cb139-1" tabindex="-1"></a>tab2_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb139-2"><a href="06-appdev-code.html#cb139-2" tabindex="-1"></a>  <span class="co"># Map output for Socioeconomic Demographics</span></span>
<span id="cb139-3"><a href="06-appdev-code.html#cb139-3" tabindex="-1"></a>  output<span class="sc">$</span>map_socio <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb139-4"><a href="06-appdev-code.html#cb139-4" tabindex="-1"></a>    map_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nyc_data, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb139-5"><a href="06-appdev-code.html#cb139-5" tabindex="-1"></a>    </span>
<span id="cb139-6"><a href="06-appdev-code.html#cb139-6" tabindex="-1"></a>    valid_data <span class="ot">&lt;-</span> map_data[<span class="sc">!</span><span class="fu">is.na</span>(map_data[[input<span class="sc">$</span>color_socio]]), ]</span>
<span id="cb139-7"><a href="06-appdev-code.html#cb139-7" tabindex="-1"></a>    pal <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;YlOrRd&quot;</span>, valid_data[[input<span class="sc">$</span>color_socio]], <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb139-8"><a href="06-appdev-code.html#cb139-8" tabindex="-1"></a>    </span>
<span id="cb139-9"><a href="06-appdev-code.html#cb139-9" tabindex="-1"></a>    <span class="fu">leaflet</span>(valid_data) <span class="sc">%&gt;%</span></span>
<span id="cb139-10"><a href="06-appdev-code.html#cb139-10" tabindex="-1"></a>      <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb139-11"><a href="06-appdev-code.html#cb139-11" tabindex="-1"></a>      <span class="fu">addPolygons</span>(</span>
<span id="cb139-12"><a href="06-appdev-code.html#cb139-12" tabindex="-1"></a>        <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal</span>(valid_data[[input<span class="sc">$</span>color_socio]]),</span>
<span id="cb139-13"><a href="06-appdev-code.html#cb139-13" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.7</span>, <span class="at">weight =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb139-14"><a href="06-appdev-code.html#cb139-14" tabindex="-1"></a>        <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(NTAName, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb139-15"><a href="06-appdev-code.html#cb139-15" tabindex="-1"></a>                       <span class="fu">paste</span>(input<span class="sc">$</span>color_socio, <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(valid_data[[input<span class="sc">$</span>color_socio]], <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>))</span>
<span id="cb139-16"><a href="06-appdev-code.html#cb139-16" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb139-17"><a href="06-appdev-code.html#cb139-17" tabindex="-1"></a>      <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">73.935242</span>, <span class="at">lat =</span> <span class="fl">40.730610</span>, <span class="at">zoom =</span> <span class="dv">10</span>)</span>
<span id="cb139-18"><a href="06-appdev-code.html#cb139-18" tabindex="-1"></a>  })</span>
<span id="cb139-19"><a href="06-appdev-code.html#cb139-19" tabindex="-1"></a>  </span>
<span id="cb139-20"><a href="06-appdev-code.html#cb139-20" tabindex="-1"></a>  <span class="co"># Socioeconomic Demographics chart</span></span>
<span id="cb139-21"><a href="06-appdev-code.html#cb139-21" tabindex="-1"></a>  output<span class="sc">$</span>socioDemoChart <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb139-22"><a href="06-appdev-code.html#cb139-22" tabindex="-1"></a>    chart_data <span class="ot">&lt;-</span> nyc_data[nyc_data<span class="sc">$</span>NTAName <span class="sc">==</span> input<span class="sc">$</span>neighborhood_socio, ]</span>
<span id="cb139-23"><a href="06-appdev-code.html#cb139-23" tabindex="-1"></a>    </span>
<span id="cb139-24"><a href="06-appdev-code.html#cb139-24" tabindex="-1"></a>    <span class="co"># Extract data and remove &quot;geometry&quot; column</span></span>
<span id="cb139-25"><a href="06-appdev-code.html#cb139-25" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(chart_data)</span>
<span id="cb139-26"><a href="06-appdev-code.html#cb139-26" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> socio_data[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(socio_data) <span class="sc">==</span> <span class="st">&quot;geometry&quot;</span>)]</span>
<span id="cb139-27"><a href="06-appdev-code.html#cb139-27" tabindex="-1"></a>    </span>
<span id="cb139-28"><a href="06-appdev-code.html#cb139-28" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> socio_data[, <span class="fu">c</span>(<span class="st">&quot;pctpov&quot;</span>, <span class="st">&quot;rent.30&quot;</span>, <span class="st">&quot;rent.50&quot;</span>)]</span>
<span id="cb139-29"><a href="06-appdev-code.html#cb139-29" tabindex="-1"></a>    </span>
<span id="cb139-30"><a href="06-appdev-code.html#cb139-30" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> <span class="fu">t</span>(socio_data)</span>
<span id="cb139-31"><a href="06-appdev-code.html#cb139-31" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(socio_data)</span>
<span id="cb139-32"><a href="06-appdev-code.html#cb139-32" tabindex="-1"></a>    socio_data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">Category =</span> <span class="fu">rownames</span>(socio_data), <span class="at">Percentage =</span> socio_data[, <span class="dv">1</span>])</span>
<span id="cb139-33"><a href="06-appdev-code.html#cb139-33" tabindex="-1"></a>    <span class="fu">rownames</span>(socio_data) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb139-34"><a href="06-appdev-code.html#cb139-34" tabindex="-1"></a>    </span>
<span id="cb139-35"><a href="06-appdev-code.html#cb139-35" tabindex="-1"></a>    <span class="fu">plot_ly</span>(<span class="at">data =</span> <span class="fu">as.data.frame</span>(socio_data), <span class="at">x =</span> <span class="sc">~</span>Category, <span class="at">y =</span> <span class="sc">~</span>Percentage, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>Category) <span class="sc">%&gt;%</span></span>
<span id="cb139-36"><a href="06-appdev-code.html#cb139-36" tabindex="-1"></a>      <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Socioeconomic Demographics -&quot;</span>, input<span class="sc">$</span>neighborhood_socio),</span>
<span id="cb139-37"><a href="06-appdev-code.html#cb139-37" tabindex="-1"></a>             <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Category&quot;</span>),</span>
<span id="cb139-38"><a href="06-appdev-code.html#cb139-38" tabindex="-1"></a>             <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Percentage&quot;</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="at">tickvals =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">20</span>)))</span>
<span id="cb139-39"><a href="06-appdev-code.html#cb139-39" tabindex="-1"></a>  })</span>
<span id="cb139-40"><a href="06-appdev-code.html#cb139-40" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="server-logic-for-tab-3" class="section level5 hasAnchor" number="9.4.3.2.3">
<h5><span class="header-section-number">C.4.3.2.3</span> Server Logic for Tab 3:<a href="06-appdev-code.html#server-logic-for-tab-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="06-appdev-code.html#cb140-1" tabindex="-1"></a>tab3_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb140-2"><a href="06-appdev-code.html#cb140-2" tabindex="-1"></a>  <span class="co"># Map output for Health Demographics</span></span>
<span id="cb140-3"><a href="06-appdev-code.html#cb140-3" tabindex="-1"></a>  output<span class="sc">$</span>map_health <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb140-4"><a href="06-appdev-code.html#cb140-4" tabindex="-1"></a>    map_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nyc_data, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb140-5"><a href="06-appdev-code.html#cb140-5" tabindex="-1"></a>    </span>
<span id="cb140-6"><a href="06-appdev-code.html#cb140-6" tabindex="-1"></a>    valid_data <span class="ot">&lt;-</span> map_data[<span class="sc">!</span><span class="fu">is.na</span>(map_data[[input<span class="sc">$</span>color_health]]), ]</span>
<span id="cb140-7"><a href="06-appdev-code.html#cb140-7" tabindex="-1"></a>    pal <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;PuBuGn&quot;</span>, valid_data[[input<span class="sc">$</span>color_health]], <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb140-8"><a href="06-appdev-code.html#cb140-8" tabindex="-1"></a>    </span>
<span id="cb140-9"><a href="06-appdev-code.html#cb140-9" tabindex="-1"></a>    <span class="fu">leaflet</span>(valid_data) <span class="sc">%&gt;%</span></span>
<span id="cb140-10"><a href="06-appdev-code.html#cb140-10" tabindex="-1"></a>      <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb140-11"><a href="06-appdev-code.html#cb140-11" tabindex="-1"></a>      <span class="fu">addPolygons</span>(</span>
<span id="cb140-12"><a href="06-appdev-code.html#cb140-12" tabindex="-1"></a>        <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal</span>(valid_data[[input<span class="sc">$</span>color_health]]),</span>
<span id="cb140-13"><a href="06-appdev-code.html#cb140-13" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.7</span>, <span class="at">weight =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb140-14"><a href="06-appdev-code.html#cb140-14" tabindex="-1"></a>        <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(NTAName, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb140-15"><a href="06-appdev-code.html#cb140-15" tabindex="-1"></a>                       <span class="fu">paste</span>(input<span class="sc">$</span>color_health, <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(valid_data[[input<span class="sc">$</span>color_health]], <span class="dv">2</span>)))</span>
<span id="cb140-16"><a href="06-appdev-code.html#cb140-16" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb140-17"><a href="06-appdev-code.html#cb140-17" tabindex="-1"></a>      <span class="fu">setView</span>(<span class="at">lng =</span> <span class="sc">-</span><span class="fl">73.935242</span>, <span class="at">lat =</span> <span class="fl">40.730610</span>, <span class="at">zoom =</span> <span class="dv">10</span>)</span>
<span id="cb140-18"><a href="06-appdev-code.html#cb140-18" tabindex="-1"></a>  })</span>
<span id="cb140-19"><a href="06-appdev-code.html#cb140-19" tabindex="-1"></a>  </span>
<span id="cb140-20"><a href="06-appdev-code.html#cb140-20" tabindex="-1"></a>  <span class="co"># Health Demographics scatter plot</span></span>
<span id="cb140-21"><a href="06-appdev-code.html#cb140-21" tabindex="-1"></a>  output<span class="sc">$</span>healthScatterChart <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb140-22"><a href="06-appdev-code.html#cb140-22" tabindex="-1"></a>    <span class="fu">plot_ly</span>(nyc_data, <span class="at">x =</span> <span class="sc">~</span>smmrate, <span class="at">y =</span> <span class="sc">~</span>ptbrate, <span class="at">text =</span> <span class="sc">~</span>NTAName, <span class="at">mode =</span> <span class="st">&#39;markers&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb140-23"><a href="06-appdev-code.html#cb140-23" tabindex="-1"></a>      <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&quot;Severe Maternal Morbidity vs Preterm Birth Rates&quot;</span>,</span>
<span id="cb140-24"><a href="06-appdev-code.html#cb140-24" tabindex="-1"></a>             <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Severe Maternal Morbidity Rate&quot;</span>),</span>
<span id="cb140-25"><a href="06-appdev-code.html#cb140-25" tabindex="-1"></a>             <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Preterm Birth Rate&quot;</span>, <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)))</span>
<span id="cb140-26"><a href="06-appdev-code.html#cb140-26" tabindex="-1"></a>  })</span>
<span id="cb140-27"><a href="06-appdev-code.html#cb140-27" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, combine all tabs into a single UI object.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="06-appdev-code.html#cb141-1" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb141-2"><a href="06-appdev-code.html#cb141-2" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;NYC Neighborhood Demographics&quot;</span>),</span>
<span id="cb141-3"><a href="06-appdev-code.html#cb141-3" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb141-4"><a href="06-appdev-code.html#cb141-4" tabindex="-1"></a>    tab1_ui,</span>
<span id="cb141-5"><a href="06-appdev-code.html#cb141-5" tabindex="-1"></a>    tab2_ui,</span>
<span id="cb141-6"><a href="06-appdev-code.html#cb141-6" tabindex="-1"></a>    tab3_ui,</span>
<span id="cb141-7"><a href="06-appdev-code.html#cb141-7" tabindex="-1"></a>    tab4_ui</span>
<span id="cb141-8"><a href="06-appdev-code.html#cb141-8" tabindex="-1"></a>  )</span>
<span id="cb141-9"><a href="06-appdev-code.html#cb141-9" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="run-the-application" class="section level4 hasAnchor" number="9.4.3.3">
<h4><span class="header-section-number">C.4.3.3</span> Run the Application<a href="06-appdev-code.html#run-the-application" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this final step,we combine the server logic for all tabs and define the overall UI layout to launch the application.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="06-appdev-code.html#cb142-1" tabindex="-1"></a><span class="co"># Combine server logic for all tabs</span></span>
<span id="cb142-2"><a href="06-appdev-code.html#cb142-2" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb142-3"><a href="06-appdev-code.html#cb142-3" tabindex="-1"></a>  <span class="fu">tab1_server</span>(input, output, session)</span>
<span id="cb142-4"><a href="06-appdev-code.html#cb142-4" tabindex="-1"></a>  <span class="fu">tab2_server</span>(input, output, session)</span>
<span id="cb142-5"><a href="06-appdev-code.html#cb142-5" tabindex="-1"></a>  <span class="fu">tab3_server</span>(input, output, session)</span>
<span id="cb142-6"><a href="06-appdev-code.html#cb142-6" tabindex="-1"></a>}</span>
<span id="cb142-7"><a href="06-appdev-code.html#cb142-7" tabindex="-1"></a></span>
<span id="cb142-8"><a href="06-appdev-code.html#cb142-8" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb142-9"><a href="06-appdev-code.html#cb142-9" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code></pre></div>
<p><img src="images/06-shiny-expanded.png" /></p>
<p>This Shiny application offers a detailed and interactive exploration of demographic data across New York City neighborhoods. Users can interactively analyze racial and socioeconomic information through dynamically updated maps and charts. The application exemplifies how R and Shiny can be used to build engaging and informative data visualizations.</p>
</div>
</div>
<div id="more-shiny-resources" class="section level3 unnumbered hasAnchor">
<h3>More Shiny Resources:<a href="06-appdev-code.html#more-shiny-resources" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Try out new themes with x and x</li>
<li>Quarto</li>
<li>Once you’re happy with your final application, it’s time to serve it! Check out tutorials like X and X to make it public</li>
</ul>

</div>
</div>
</div>
<hr class="footer-line">
            </section>

          </div>
        </div>
      </div>
<a href="05-analysisR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="08-references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"float": true
}
});
});
</script>

</body>

</html>
